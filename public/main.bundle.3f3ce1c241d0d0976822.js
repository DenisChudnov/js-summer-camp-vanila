/*! For license information please see main.bundle.3f3ce1c241d0d0976822.js.LICENSE.txt */
(()=>{"use strict";var t={577:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,":root{\n    --modal-overlay-background-color:rgba(0, 0, 0, .5);\n    --modal-overlay-hidden-background-color:rgba(0, 0, 0, 0);\n    --modal-border-color:#eee;\n    --modal-background-color:#fff;\n\n}\n\n.vmodal {}\n\n.vmodal.open .modal-overlay,\n.vmodal.open .modal-window {\n    opacity: 1;\n    z-index: 1000;\n}\n\n.vmodal.hide .modal-overlay,\n.vmodal.hide .modal-window {\n    opacity: 1;\n    z-index: 1000;\n}\n\n.vmodal.open .modal-window {\n    transform: translateY(100px);\n}\n\n.vmodal.open .modal-overlay {\n    background: var(--modal-overlay-background-color);\n}\n\n.vmodal.hide .modal-window {\n    transform: translateY(-200px);\n}\n\n.vmodal.hide .modal-overlay {\n    background: var(--modal-overlay-hidden-background-color);\n}\n\n.modal-window, .modal-overlay {\n    opacity: 0;\n    z-index: -1;\n}\n\n.modal-overlay {\n    position: fixed;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    background: var(--modal-overlay-background-color);\n    transition: background .2s ease-in;\n}\n\n.modal-window {\n    width: 600px;\n    border-radius: 5px;\n    background: var(--modal-background-color);\n    margin: 0 auto;\n    transform: translateY(-200px);\n    transition: transform .2s ease-in;\n}\n\n.modal-header {\n    padding: 5px 10px;\n    display: flex;\n    justify-content: space-between;\n    border-bottom: 1px solid var(--modal-border-color);\n}\n\n.modal-title {\n    font-size: 1.5rem;\n}\n\n.modal-close {\n    cursor: pointer;\n}\n\n.modal-body {\n    padding: 10px;\n}\n\n.modal-body p {\n    margin: 0 0 5px;\n}\n\n.modal-footer {\n    padding: 5px 10px;\n    border-top: 1px solid var(--modal-border-color);\n}\n",""]);const o=i},425:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,'.table-film.hidden {\n    visibility: hidden;\n}\n\n.s-list {\n    border: 2px solid black;\n    width: 100%;\n    cellspacing: 0;\n}\n\n.table-films-list th {\n    cursor: pointer;\n}\n\n.table-films-list .th-sort-asc::after {\n    content: "\\25b4";\n}\n\n.table-films-list .th-sort-desc::after {\n    content: "\\25be";\n}\n\n.table-films-list .th-sort-asc::after,\n.table-films-list .th-sort-desc::after {\n    margin-left: 5px;\n}\n\n',""]);const o=i},890:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),i=n.n(r)()((function(t){return t[1]}));i.push([t.id,".hidden {\n    display: none;\n}\n",""]);const o=i},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var u=[].concat(t[a]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},s=[],a=0;a<t.length;a++){var u=t[a],c=r.base?u[0]+r.base:u[0],h=o[c]||0,l="".concat(c," ").concat(h);o[c]=h+1;var f=n(l),d={css:u[1],media:u[2],sourceMap:u[3]};-1!==f?(e[f].references++,e[f].updater(d)):e.push({identifier:l,updater:i(d,r),references:1}),s.push(l)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var u=r(t,i),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=u}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(379),e=n.n(t),r=n(795),i=n.n(r),o=n(569),s=n.n(o),a=n(565),u=n.n(a),c=n(216),h=n.n(c),l=n(589),f=n.n(l),d=n(425),p={};function v(){return!!localStorage.getItem("activeUser")}p.styleTagTransform=f(),p.setAttributes=u(),p.insert=s().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=h(),e()(d.Z,p),d.Z&&d.Z.locals&&d.Z.locals;var m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function b(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function w(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function T(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function E(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}Object.create,Object.create;var _={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function S(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=S(t[n],e[n]));return t}var A=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function N(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function k(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var D=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return g(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?O(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new D(i,a,r);return u},t}();function O(t,e){return t.replace(R,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var R=/\{\$([^}]+)}/g;function x(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){var n=new P(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var P=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function M(){}function F(t){return t&&t._delegate?t._delegate:t}var V,U=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),j="[DEFAULT]",q=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new A;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:j})}catch(t){}try{for(var r=I(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=T(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=j),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return b(this,void 0,void 0,(function(){var t;return w(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(E(E([],T(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),T(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=j),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=I(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=T(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=I(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===j?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=j),this.component?this.component.multipleInstances?t:j:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),B=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new q(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function K(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var G,H=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(G||(G={}));var z,W={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Q=G.INFO,X=((V={})[G.DEBUG]="log",V[G.VERBOSE]="log",V[G.INFO]="info",V[G.WARN]="warn",V[G.ERROR]="error",V),Y=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=X[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,K(["["+i+"]  "+t.name+":"],n))}},$=function(){function t(t){this.name=t,this._logLevel=Q,this._logHandler=Y,this._userLogHandler=null,H.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in G))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?W[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,G.DEBUG],t)),this._logHandler.apply(this,K([this,G.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,G.VERBOSE],t)),this._logHandler.apply(this,K([this,G.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,G.INFO],t)),this._logHandler.apply(this,K([this,G.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,G.WARN],t)),this._logHandler.apply(this,K([this,G.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,K([this,G.ERROR],t)),this._logHandler.apply(this,K([this,G.ERROR],t))},t}();function J(t){H.forEach((function(e){e.setLogLevel(t)}))}var Z,tt=((z={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",z["bad-app-name"]="Illegal App name: '{$appName}",z["duplicate-app"]="Firebase App named '{$appName}' already exists",z["app-deleted"]="Firebase App named '{$appName}' already deleted",z["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",z["invalid-log-argument"]="First argument to `onLog` must be null or a function.",z),et=new C("app","Firebase",tt),nt="@firebase/app",rt="[DEFAULT]",it=((Z={})[nt]="fire-core",Z["@firebase/analytics"]="fire-analytics",Z["@firebase/app-check"]="fire-app-check",Z["@firebase/auth"]="fire-auth",Z["@firebase/database"]="fire-rtdb",Z["@firebase/functions"]="fire-fn",Z["@firebase/installations"]="fire-iid",Z["@firebase/messaging"]="fire-fcm",Z["@firebase/performance"]="fire-perf",Z["@firebase/remote-config"]="fire-rc",Z["@firebase/storage"]="fire-gcs",Z["@firebase/firestore"]="fire-fst",Z["fire-js"]="fire-js",Z["firebase-wrapper"]="fire-js-all",Z),ot=new $("@firebase/app"),st=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=S(void 0,t),this.container=new B(e.name),this._addComponent(new U("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=rt),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=rt),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ot.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw et.create("app-deleted",{appName:this.name_})},t}();st.prototype.name&&st.prototype.options||st.prototype.delete||console.log("dc");var at=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=rt);var s=o.name;if("string"!=typeof s||!s)throw et.create("bad-app-name",{appName:String(s)});if(x(e,s))throw et.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=it[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ot.warn(u.join(" "))}o(new U(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:J,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw et.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=W[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:G[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=H;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!x(e,t=t||rt))throw et.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return ot.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw et.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&S(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(st);return e.INTERNAL=y(y({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){S(e,t)},createSubscribe:L,ErrorFactory:C,deepExtend:S}),e}(),ut=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ht=at.initializeApp;at.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k()&&ot.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ht.apply(void 0,t)};var lt=at;!function(t,e){t.INTERNAL.registerComponent(new U("platform-logger",(function(t){return new ut(t)}),"PRIVATE")),t.registerVersion(nt,"0.6.28",void 0),t.registerVersion("fire-js","")}(lt);const ft=lt;var dt="8.7.1";ft.registerVersion("firebase",dt,"app"),ft.SDK_VERSION=dt,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Ra(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=D+t,this.message=e||C[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(D.length),t.message,t.serverResponse):null}_(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var k,D="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function M(t,e){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function V(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=R("__EID__")?"__EID__":void 0,_(L,Error),L.prototype.name="CustomError",_(P,L),P.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new F((function(){return new B}),(function(t){t.reset()}));function q(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function X(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function $(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var ht=a.navigator;if(ht){var lt=ht.userAgent;if(lt){Z=lt;break t}}Z=""}function dt(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Et}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Et?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Tt,Et={},_t={};function St(){if(void 0===Tt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){a.console&&a.console.error(t.message)}Tt=t}else Tt=t}return Tt}function At(t,e){this.a=e===Ot?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Rt(t,e){this.a=e===Ut?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t))t=new Rt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Lt.test(e[1])?new Rt(t,Ut):null}return t}function Vt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ut))}var Ut={},jt=new Rt("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Vt(t),e=e||a,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Qt,Xt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),$t=dt("Edge"),Jt=$t||Yt,Zt=dt("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ut(Z.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=a.document;return t?t.documentMode:void 0}t:{var ne="",re=(Qt=Z,Zt?/rv:([^\);]+)(\)|;)/.exec(Qt):$t?/Edge\/([\d\.]+)/.exec(Qt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):te?/WebKit\/(\S+)/.exec(Qt):Xt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}a.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}G(s?J(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout((function(){throw t}),0)}function ye(t,e){de||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!dt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(fe||(fe=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),fe(t)):a.setImmediate(t)}}(),be||(de(),be=!0),we.add(t,e)}var be=!1,we=new U;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){ge(t)}V(j,t)}be=!1}function Te(t,e){if(this.a=Ee,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Me(n,_e,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Se,t)}))}catch(t){Me(this,Se,t)}}var Ee=0,_e=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new F((function(){return new Ae}),(function(t){t.reset()}));function ke(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Te)return t;var e=new Te(l);return Me(e,_e,t),e}function Ce(t){return new Te((function(e,n){n(t)}))}function Oe(t,e,n){Fe(t,e,n,null)||ye(T(e,t))}function Re(t){return new Te((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Ee)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ee&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),je(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function Le(t,e){t.b||t.a!=_e&&t.a!=Se||Ve(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=ke(null,null,null);return i.a=new Te((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Le(t,i),i.a}function Me(t,e,n){t.a==Ee&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ve(t),e!=Se||n instanceof Ke||function(t,e){t.g=!0,ye((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Te)return Le(t,ke(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ve(t){t.h||(t.h=!0,ye(t.gc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}V(Ne,e)}function qe(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Te.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},Te.prototype.$goog_Thenable=!0,(t=Te.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Ee){var e=new Ke(t);ye((function(){xe(this,e)}),this)}},t.$c=function(t){this.a=Ee,Me(this,_e,t)},t.ad=function(t){this.a=Ee,Me(this,Se,t)},t.gc=function(){for(var t;t=Ue(this);)je(this,t,this.a,this.i);this.h=!1};var Be=ge;function Ke(t){L.call(this,t)}function Ge(){0!=He&&(ze[m(this)]=this),this.ya=this.ya,this.pa=this.pa}_(Ke,L),Ke.prototype.name="cancel";var He=0,ze={};function We(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=He)){var e=m(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ge.prototype.ya=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Xe=!Yt||9<=Number(ue),Ye=Yt&&!ae("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ze,Je);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?_n(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=bn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=Tn(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=Tn(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function mn(t){return t in hn?hn[t]:hn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function bn(t,e){if(t.wa)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tn(t){return p(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function En(){Ge.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(p(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function kn(t){var e=null;return new Te((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Dn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(En,Ge),En.prototype[en]=!0,En.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},En.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},En.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;yt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},En.prototype.Da=function(){if(En.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=On.prototype).X=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Vn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),Vn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Vn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Xn)),t.b=new $n(e,t.i))}function Un(t,e,n){t.b.set(e,n)}function jn(t,e){return t.b.get(e)}function qn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Bn(t,e,n,r){var i=new Pn(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Qn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Yn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Vn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Qn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Jn(t),e=ir(t,e),xn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),J(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=$(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Or();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Ft(t)||jt)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||a.window;try{t.close()}catch(t){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),kr(Or())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Vt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Kt("",r,n,s),t=xt(e),s&&(Jt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Bt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Kt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Te((function(e){"complete"==a.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function Ir(t){return t=t||Or(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tr(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Er(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return ft.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ft.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Sr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Nr="Chrome";function kr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Ar:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=kr(i=Or()):"Worker"===r&&(r=kr(i=Or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Or(){return a.navigator&&a.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=a.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!a.indexedDB}catch(t){return Er()&&!!a.indexedDB}return!1}function Lr(){return(Pr()||"chrome-extension:"===Mr()||Ir())&&!Sr()&&xr()&&!Er()}function Pr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return a.location&&a.location.protocol||null}function Fr(t){return!vr(t=t||Or())&&kr(t)!=Ar}function Vr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function jr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=kr(t=t||Or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Or(),e=_r(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Rr("fireauth.oauthhelper",a)&&!Rr("fireauth.iframe",a))}Gr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==$r.abcd}catch(Qt){Qr=!1}function Jr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[si]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[di],r=t[vi],i=t[mi];if(t=ri(t[pi]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[wi]=n||null,e[gi]=r):(e[yi]=r||null,e[wi]=r||null,e[gi]=n||null),e[bi]=t||null,Jr(this,Ti,i),Jr(this,Ii,ei(e))}_(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",mi="requestType",gi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",Ii="data",Ti="operation";function Ei(t){var e=jn(t=qn(t),_i)||null,n=jn(t,Si)||null,r=jn(t,ki)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new A("argument-error",_i+", "+Si+"and "+ki+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:jn(t,Ai)||null,languageCode:jn(t,Ni)||null,tenantId:jn(t,Di)||null})}var _i="apiKey",Si="oobCode",Ai="continueUrl",Ni="languageCode",ki="mode",Di="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new Ei(t)}catch(t){return null}}function Ri(t){var e=t[Fi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[ji];var r=n[Vi];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",Vi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new A("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Li+" property must be a non empty string when specified.");this.i=t||null}var xi="android",Li="dynamicLinkDomain",Pi="handleCodeInApp",Mi="iOS",Fi="url",Vi="installApp",Ui="minimumVersion",ji="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Gi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Gi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Xi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Qi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Qi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Qi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Wi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Ji])return new to(t)}catch(t){}return null}var Ji="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Ji]){var n=Hi(t[Ji]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function eo(t){to.call(this,t),Jr(this,"profile",ei((t=jr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function so(t){var e=qn(t),n=jn(e,"link"),r=jn(qn(n),"link");return e=jn(e,"deep_link_id"),jn(qn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}_(eo,to),_(no,eo),_(ro,eo),_(io,eo),_(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[Zs]){var n=Hi(t[Zs]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new A("user-mismatch"):t}))}function fo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function go(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Yi(t)||{}).Ja||null,this.pb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,Qi),this.a=[]}function To(){Io.call(this,"facebook.com")}function Eo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function _o(){Io.call(this,"github.com")}function So(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Ao(){Io.call(this,"google.com"),this.Ca("profile")}function No(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Wi)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Lo(e)))throw new A("argument-error","Invalid email link!");return new Co(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Oi(t=so(t)))&&t.operation===li?t:null}function Po(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Vo(t){try{this.a=t||ft.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Po({fb:t,eb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return Eo(n);case"github.com":return So(n);case"twitter.com":return Do(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new fo(e,s):new mo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},ao.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return wa(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,Ia(t,n)},fo.prototype.c=function(t,e){return lo(Ta(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return wa(t,go(this))},mo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,Ia(t,n)},mo.prototype.c=function(t,e){return lo(Ta(t,go(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Jb=mt(t),this},_(wo,bo),_(Io,bo),Io.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Io.prototype.Rb=function(){return J(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},_(To,Io),Jr(To,"PROVIDER_ID","facebook.com"),Jr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(_o,Io),Jr(_o,"PROVIDER_ID","github.com"),Jr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),_(Ao,Io),Jr(Ao,"PROVIDER_ID","google.com"),Jr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),_(ko,bo),Jr(ko,"PROVIDER_ID","twitter.com"),Jr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ca,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ga,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return lo(this.ka(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.gb(Fo(this))},Po.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Po.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Vo.prototype.gb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Vo,{PROVIDER_ID:"phone"}),Zr(Vo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.T=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Qo(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:jo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function Yo(){}function $o(t){return t.c||(t.c=t.b())}function Jo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ts(){}function es(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Tb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function ns(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function rs(t,e,n){this.reset(t,e,n,void 0,void 0)}function is(t){this.f=t,this.b=this.c=this.a=null}function os(t,e){this.name=t,this.value=e}_(Wo,A),_(Qo,A),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,_(Jo,Yo),Jo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Jo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Jo,_(ts,Yo),ts.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new es;throw Error("Unsupported browser")},ts.prototype.b=function(){return{}},(t=es.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ns(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ns(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ns(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},rs.prototype.a=null,rs.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},os.prototype.toString=function(){return this.name};var ss=new os("SEVERE",1e3),as=new os("WARNING",900),us=new os("CONFIG",700),cs=new os("FINE",500);function hs(t){return t.c?t.c:t.a?hs(t.a):(M("Root logger has no level set."),null)}is.prototype.log=function(t,e,n){if(t.value>=hs(this).value)for(p(e)&&(e=e()),t=new rs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ls={},fs=null;function ds(t){var e;if(fs||(fs=new is(""),ls[""]=fs,fs.c=us),!(e=ls[t])){e=new is(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ds(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ls[t]=e}return e}function ps(t,e){t&&t.log(cs,e,void 0)}function vs(t){this.f=t}function ms(t){En.call(this),this.u=t,this.h=void 0,this.readyState=gs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ds("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(vs,Yo),vs.prototype.a=function(){return new ms(this.f)},vs.prototype.b=function(t){return function(){return t}}({}),_(ms,En);var gs=0;function ys(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function bs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ws(t)}function ws(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Is(t){En.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ts,this.u=this.S=!1}(t=ms.prototype).open=function(t,e){if(this.readyState!=gs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ws(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,bs(this)),this.readyState=gs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ws(this)),this.a&&(this.readyState=3,ws(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ys(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?bs(this):ws(this),3==this.readyState&&ys(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,bs(this))},t.sc=function(t){this.a&&(this.response=t,bs(this))},t.Va=function(t){var e=this.i;e&&e.log(as,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&bs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(as,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(as,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(Is,En);var Ts="";Is.prototype.b=ds("goog.net.XhrIo");var Es=/^https?$/i,_s=["POST","PUT"];function Ss(t){return"content-type"==t.toLowerCase()}function As(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ns(t),Ds(t)}function Ns(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Os(t)&&2==Rs(t))ps(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==Os(t))Nn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Os(t)){ps(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Rs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!Es.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Os(t)?t.a.statusText:""}catch(e){ps(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Rs(t)+"]",Ns(t)}}finally{Ds(t)}}}function Ds(t,e){if(t.a){Cs(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ss,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Cs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Os(t){return t.a?t.a.readyState:0}function Rs(t){try{return 2<Os(t)?t.a.status:-1}catch(t){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+Rs(t)+"]"}function Ls(t){var e=Hs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ms(t){if(t.a){if(!t.v)throw new js(t);t.v=!1}}function Fs(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Vs(t){return W(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Vs(t)){var e=t.h,n=Ks[e];n&&(a.clearTimeout(n.a),delete Ks[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Vs(t)||(n=!0)}}t.c=e,r&&(u=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Ls?(Fs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Bs(e),Ks[e.a]=e,t.h=e.a)}function js(){L.call(this)}function qs(){L.call(this)}function Bs(t){this.a=a.setTimeout(I(this.c,this),0),this.b=t}(t=Is.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ps(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ps(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ds(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ds(this,!0)),Is.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ks(this):this.Jc())},t.Jc=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ts:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ss,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ps(this.b,"Can not get response: "+t.message),null}},Ls.prototype.cancel=function(t){if(this.a)this.c instanceof Ls&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qs(this),Ms(this),Ps(this,!1,t))}},Ls.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},Ls.prototype.then=function(t,e,n){var r,i,o=new Te((function(t,e){r=t,i=e}));return Fs(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ls.prototype.$goog_Thenable=!0,_(js,L),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",_(qs,L),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Bs.prototype.c=function(){throw delete Ks[this.a],this.b};var Ks={};function Gs(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Ls(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){zs(i,!0);var t=new Xs(Qs,"Timeout reached for loading script "+r);Ms(s),Ps(s,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.xd||!1,u),Ms(s),Ps(s,!0,null))},i.onerror=function(){zs(i,!0,u);var t=new Xs(Ws,"Error while loading script "+r);Ms(s),Ps(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=h(e.document):(null===c&&(c=h(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Hs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ws=0,Qs=1;function Xs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ys(t){this.f=t}function $s(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ta,this.g=mt(t.secureTokenHeaders||ea),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||na,this.a=mt(t.firebaseHeaders||ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&ft.INTERNAL.node&&ft.INTERNAL.node.XMLHttpRequest)&&!Er())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new vs(self):Sr()?this.f=new Ys(n):this.f=new ts,this.b=null}_(Xs,L),_(Ys,Yo),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var Js,Zs="idToken",ta=new Gr(3e4,6e4),ea={"Content-Type":"application/x-www-form-urlencoded"},na=new Gr(3e4,6e4),ra={"Content-Type":"application/json"};function ia(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function oa(t,e){e&&(t.l=sa("https://securetoken.googleapis.com/v1/token",e),t.h=sa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=sa("https://identitytoolkit.googleapis.com/v2/",e))}function sa(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ua(t,e,n,r,i,o,s){(function(){var t=Or();return!((t=kr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Er()?t=I(t.u,t):(Js||(Js=new Te((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fs(t,null,e,void 0)}(Gs(kt(ca,{onload:ha})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(Er()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Is(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ps(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(s,"ready",(function(){u&&clearTimeout(u),We(this)})),Sn(s,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?$o(t.D):$o(Ho),t.a.onreadystatechange=I(t.Wb,t);try{ps(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ps(t.b,xs(t,"Error opening Xhr: "+e.message)),void As(t,e)}e=r||"";var o=new On(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)G(t,e,void 0);else for(var n=Cn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ss,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Q(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Cs(t),0<t.g&&(t.u=function(t){return Yt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ps(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ps(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ps(t.b,xs(t,"Send error: "+e.message)),As(t,e)}}(s,t,n,r,i)};var ca=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ha="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new A("invalid-email")}function fa(t){"email"in t&&la(t)}function da(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function pa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Js.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.Ab=function(){return ru(this,Ha,{})},$s.prototype.Cb=function(t,e){return ru(this,Ka,{idToken:t,email:e})},$s.prototype.Db=function(t,e){return ru(this,Ga,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ma(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ga(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;da(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function Ia(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ta(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Xa,e)}function Ea(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=$s.prototype).Eb=function(t,e){var n={idToken:t},r=[];return pt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ka,n)},t.wb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Va,t)},t.xb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Pa,t)},t.vb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Sa,{oobCode:t})},t.kb=function(t){return ru(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",A:Ea,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ea,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Aa={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new A("weak-password")},G:da,V:!0,B:!0},Na={endpoint:"createAuthUri",B:!0},ka={endpoint:"deleteAccount",O:["idToken"]},Da={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Ca={endpoint:"emailLinkSignin",O:["email","oobCode"],A:la,G:da,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:la,G:da,V:!0},Ra={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ma,G:da,B:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ma,G:da,B:!0,Na:!0},La={endpoint:"getAccountInfo"},Pa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Va={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");la(t)},Z:"email",B:!0},Ua={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},ja={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qa={endpoint:"resetPassword",A:Ea,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Ga={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new A("weak-password")},G:da,V:!0},Ha={endpoint:"signupNewUser",G:da,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ga,Za:ya,G:ba,V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:ga,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);da(t)},V:!0,B:!0},Ya={endpoint:"verifyAssertion",A:function(t){if(ga(t),!t.idToken)throw new A("internal-error")},Za:ya,G:ba,V:!0},$a={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:da,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new A("wrong-password")},G:da,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:pa,G:da,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");pa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);da(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:pa,G:da,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Zs]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ce(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Un(a,"key",t.c),s&&Un(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(a,c,i[c]);return new Te((function(e,n){ua(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=Vr(t)),new A("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(hu||(hu=new Te((function(t,e){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},De(Gs(r=kt(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Te((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Bn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return ft.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:yr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function mu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ko(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function gu(t){return t.l||(t.C=t.c?Cr(t.c,du(t.b)):null,t.l=new $s(t.g,R(t.i),t.C),t.f&&oa(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function bu(t){if(this.a=t||ft.INTERNAL.reactNative&&ft.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=I(this.c,this)}lu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=ft.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),vt(e)||Un(t,"customParameters",Vr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Un(t,"scopes",n.join(",")),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Un(t,"v",this.i):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!jn(t,s)&&Un(t,s,this.b[s]);return this.h?Un(t,"tid",this.h):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(s=du(this.c)).length&&Un(t,"fw",s.join(",")),t.toString()},(t=pu.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.sb.then((function(){return new Te((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Te((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return kn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Or();return!Fr(t)&&!Br(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Ce(new A("popup-blocked"));if(s&&!Fr())return this.ma().o((function(e){mr(t),i(e)})),r(),De();this.a||(this.a=vu(gu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){qo(n),s||dr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(gu(this)));var i=this;return this.a.then((function(){qo(e),dr(yu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&jr(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Vr(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Tu=[];function Eu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ce(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Te((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Er()&&self?(this.v=function(){var t=Er()?self:null;if(G(Tu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Tu.push(e)}return e}(),Eu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Eu(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new _u(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Te((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Te((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Cu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new Te((function r(i,o){Cu(t).then(e).then(i).o((function(e){if(!(3<++n))return Cu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!a.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Lu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new Te((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Fu(t){return Cu(t).then((function(t){var e=xu(Lu(t,!1));return e.getAll?Pu(e.getAll()):new Te((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Ru()){var t=qr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&ft.INTERNAL.node&&ft.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Bu()||ft.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&ft.INTERNAL.node&&ft.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Hu()||ft.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Xu,t.Node=Yu,t.ReactNative=$u,t.Worker=Ju,this.a=t[_r()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Pu((e=xu(Lu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=xu(Lu(o,!0)),i)return i.value=e,Pu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Pu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Pu(xu(Lu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Pu(xu(Lu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Vu(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&ln(a.window,"storage",t)},t.ia=function(t){a.window&&pn(a.window,"storage",t)},(t=Ku.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Vr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Qu,Xu={F:qu,cb:Gu},Yu={F:qu,cb:Gu},$u={F:bu,cb:Ku},Ju={F:qu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Br(Or())||!Tr()),e=Fr(),n=xr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!lr()&&Wr()||!a.indexedDB?new t.a.F:new Uu(Er()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new ju}this.v=new ju,this.f=I(this.Zb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Wr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},Yt&&ue&&10==ue&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,I(this.nb,this))},t.nb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=a.Int32Array?new Int32Array(yc):yc),this.reset()}_(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,dc=[],pc=0;pc<fc;pc++)dc[pc]=0;var vc=$(128,dc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function gc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):J(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}_(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Tc(t){return new A("invalid-cordova-configuration",t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.ma().then((function(){return new Te((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=jr(jn(o=qn(i),"firebaseError")||null))?N(o):null)?new Bo(r.c,r.b,null,null,o,null,r.T()):new Bo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new Bo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=kn(500).then((function(){return Sc(t).then((function(){r||Ec(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Go),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ko(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?wr().then((function(){return new Te((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",a))throw Tc("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",a))throw Tc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",a))throw Tc("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",a))throw Tc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),De()},t.Nb=function(){return Ce(new A("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ce(new A("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=De().then((function(){return qo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Bo(e,r,null,o,new A("no-auth-event"),null,i),u=Rr("BuildInfo.packageName",a);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",a),h={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Or().toLowerCase().match(/android/))return Ce(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;gc(e,t),t=[];var n=8*e.g;56>e.c?gc(e,vc,56-e.c):gc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",a)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",a)))throw new A("invalid-cordova-configuration");e=Or(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Te((function(t,e){u=function(){var e=Rr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function kc(t){return ic(t.b,Nc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Gc,this.C=new Xc,this.g=new Ac(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Cc(this.D,this.v,this.m,k,this.J)}function Cc(t,e,n,r,i){var o=ft.SDK_VERSION||null;return Ir()?new Ic(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Yb()&&Oc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)})),t.a.Ub()||Hc(t.b)}function xc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Oc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Lc(t,e){Y(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Cc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Hc(this.b),e};var Pc=new Gr(2e3,1e4),Mc=new Gr(3e4,6e4);function Fc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Vc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Vc(e))throw new A("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new Te((function(){})):kc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Pc.get())}Dc.prototype.ra=function(){return this.b.ra()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new Dc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ce(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function $c(t,e){this.a=e,Jr(this,"verificationId",t)}function Jc(t,e,n,r){return new Vo(t).gb(e,n).then((function(t){return new $c(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;G(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Qc(t,a,e,null)})).o((function(e){Qc(t,a,null,e)}))}(this,t,e):Ce(new A("invalid-auth-event")):(Qc(this,!1,null,null),De())}else Ce(new A("invalid-auth-event"))},Gc.prototype.ra=function(){var t=this;return new Te((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=kn(Mc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ce(new A("invalid-auth-event"))}else Ce(new A("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Jr(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function sh(t){Jr(this,"factorId",t.fa),this.a=t}function ah(t){if(sh.call(this,t),this.a.fa!=Vo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Hr()||!t?De():new Te((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ph(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Hi(e[Zs]||""),t.a=e.refreshToken,ph(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function gh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function yh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=ft.SDK_VERSION?Cr(ft.SDK_VERSION):null;this.a=new $s(this.l,R(k),r),(this.u=t.emulatorConfig||null)&&oa(this.a,this.u),this.h=new dh(this.a),Nh(this,e[Zs]),vh(this.h,e),Jr(this,"refreshToken",this.h.a),Ch(this,n||{}),En.call(this),this.P=!1,this.s&&Lr()&&(this.b=Kc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=I(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){bh(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Th(i,t.f)},this.ja=null,this.S=new ch(this,n),Jr(this,"multiFactor",this.S)}function bh(t,e){t.u=e,oa(t.a,e),t.b&&(e=t.b,t.b=Kc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),xc(t.b,t)))}function wh(t,e){t.qa&&pn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&ln(e,"languageCodeChanged",t.Pa)}function Ih(t,e){t.$&&pn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&ln(e,"emulatorConfigChanged",t.Ba)}function Th(t,e){t.aa=e,aa(t.a,ft.SDK_VERSION?Cr(ft.SDK_VERSION,t.aa):null)}function Eh(t,e){t.ja&&pn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&ln(e,"frameworkChanged",t.Oa)}function _h(t){try{return ft.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sh(t){t.J||t.D.b||(t.D.start(),pn(t,"tokenChanged",t.ba),ln(t,"tokenChanged",t.ba))}function Ah(t){pn(t,"tokenChanged",t.ba),t.D.stop()}function Nh(t,e){t.Aa=e,Jr(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Re(e).then((function(){return t}))}function Dh(t){t.b&&!t.P&&(t.P=!0,xc(t.b,t))}function Ch(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Oh(){}function Rh(t){return De().then((function(){if(t.J)throw new A("app-deleted")}))}function xh(t){return z(t.providerData,(function(t){return t.providerId}))}function Lh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Fh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new mh),G(e.providerData,(function(e){Lh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),hh(t.S,e.S.b))}function Vh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,La,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Mh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Zs]&&t.Aa!=e[Zs]&&(vh(t.h,e),t.dispatchEvent(new uh("tokenChanged")),Nh(t,e[Zs]),Mh(t,"refreshToken",t.h.a))}function jh(t,e){return Vh(t).then((function(){if(Q(xh(t),e))return kh(t).then((function(){throw new A("provider-already-linked")}))}))}function qh(t,e,n){return ti({user:t,credential:jo(e),additionalUserInfo:e=$i(e),operationType:n})}function Bh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function Kh(t,e,n,r,i){if(!Lr())return Ce(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=Yi(n.providerId),s=qr(t.uid+":::"),a=null;(!Fr()||Tr())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,ft.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=gr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Te((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=jc(t.b,t,e,u,s)}))})).then((function(t){return u&&mr(u),t?ti(t):null})).o((function(t){throw u&&mr(u),t})),zh(t,r,i)}function Gh(t,e,n,r,i){if(!Lr())return Ce(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ce(t.i);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Xh,t.w(),e.a)),e})).then((function(){return Uc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Yh(t.ha);throw o})).then((function(){if(o)throw o})),zh(t,r,i)}function Hh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function zh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ce(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new uh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){X(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),_h(t),I(t.jc,t))),n||e}))}function Wh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new yh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&Lh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Qh(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[eh],delete n[nh],yt(n,t),e.g(n)}))},_(rh,A),oh.prototype.tb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Ra,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,xa,n)}))}(this,t,e)},_(sh,oh),_(ah,sh),_(uh,Je),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return hh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ce(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Te((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ua(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,ph(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(yh,En),yh.prototype.xa=function(t){this.za=t,ia(this.a,t)},yh.prototype.la=function(){return this.za},yh.prototype.Ga=function(){return J(this.aa)},yh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(yh.prototype,"providerId","firebase"),(t=yh.prototype).reload=function(){var t=this;return zh(this,Rh(this).then((function(){return Vh(t).then((function(){return kh(t)})).then(Oh)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return zh(this,Rh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Nh(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Mh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Ch(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new gh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Lh(this,e[n]);Mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return zh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=qh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return zh(this,jh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=qh(e,t,"link"),Bh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return zh(this,jh(this,"phone").then((function(){return Jc(_h(n),t,e,I(n.rb,n))})))},t.Mc=function(t,e){var n=this;return zh(this,De().then((function(){return Jc(_h(n),t,e,I(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return zh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){var e=this;return zh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rh(this);var e=this;return zh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Mh(e,"displayName",t.displayName||null),Mh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),kh(e)})).then(Oh))},t.cd=function(t){var e=this;return zh(this,Vh(this).then((function(n){return Q(xh(e),t)?function(t,e,n){return ru(t,Da,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(xh(e),(function(t){n[t]||Ph(e,t)})),n[Vo.PROVIDER_ID]||Jr(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return zh(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");wh(t,null),Ih(t,null),Eh(t,null),t.N=[],t.J=!0,Ah(t),Jr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Mb,this):null},t.Ec=function(t){var e=this;return Kh(this,"linkViaPopup",t,(function(){return jh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Nc=function(t){return Kh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Gh(this,"linkViaRedirect",t,(function(){return jh(e,t.providerId)}),!1)},t.Oc=function(t){return Gh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,this.I().then((function(n){return Ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=qh(i,t,"link"),Bh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return zh(this,De().then((function(){return lo(Ta(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=qh(i,t,"reauthenticate"),Uh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return zh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new Ri(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return zh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return zh(this,t=lo(De(t),n.uid).then((function(t){return e=qh(n,t,"reauthenticate"),Uh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.S.w()),t};var Xh={name:"redirectUser",F:"session"};function Yh(t){return ic(t.b,Xh,t.a)}function $h(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=tl("local"),n=tl("session"),r=tl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=jr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Zh,t.a).then((function(t){return t?tl(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(tl("local"),this.a,I(this.g,this))}function Jh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,tl(Zu[n]),t.a));return r.push(ic(t.b,Zh,t.a)),function(t){return new Te((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Oe(t[a],T(o,a),s);else e(i)}))}(r)}$h.prototype.g=function(){var t=this,e=tl("local");il(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var Zh={name:"persistence",F:"session"};function tl(t){return{name:"authUser",F:t}}function el(t,e){return il(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function nl(t){return il(t,(function(){return ic(t.b,t.c,t.a)}))}function rl(t,e,n){return il(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Wh(t||{})}))}))}function il(t,e){return t.f=t.f.then(e,e),t.f}function ol(t){if(this.l=!1,Jr(this,"settings",new Yc),Jr(this,"app",t),!dl(this).options||!dl(this).options.apiKey)throw new A("invalid-api-key");t=ft.SDK_VERSION?Cr(ft.SDK_VERSION):null,this.a=new $s(dl(this).options&&dl(this).options.apiKey,R(k),t),this.P=[],this.s=[],this.N=[],this.Pa=ft.INTERNAL.createSubscribe(I(this.zc,this)),this.W=void 0,this.ib=ft.INTERNAL.createSubscribe(I(this.Ac,this)),ll(this,null),this.i=new $h(dl(this).options.apiKey+":"+dl(this).name),this.D=new Qh(dl(this).options.apiKey+":"+dl(this).name),this.$=gl(this,function(t){var e=dl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Wh(t||{})}))}(t.D,dl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Yh(t.D)}));return gl(t,e)}(t).then((function(){return rl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return el(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:nl(t.i)}))):null})).then((function(e){ll(t,e||null)}));return gl(t,n)}(this)),this.h=gl(this,function(t){return t.$.then((function(){return hl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(tl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.qa=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=dl(t).options.authDomain,n=dl(t).options.apiKey;e&&Lr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,dl(t).name,t.R),xc(t.b,t),pl(t)&&Dh(pl(t)),t.m){Dh(t.m);var r=t.m;r.xa(t.la()),wh(r,t),Th(r=t.m,t.J),Eh(r,t),bh(r=t.m,t.R),Ih(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,En.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=qn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function sl(t){Je.call(this,"languageCodeChanged"),this.h=t}function al(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function ul(t){Je.call(this,"frameworkChanged"),this.f=t}function cl(t){return t.Oa||Ce(new A("auth-domain-config-required"))}function hl(t){if(!Lr())return Ce(new A("operation-not-supported-in-this-environment"));var e=cl(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return gl(t,e)}function ll(t,e){pl(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(pl(t),t.Ba),pn(pl(t),"tokenChanged",t.qa),pn(pl(t),"userDeleted",t.za),pn(pl(t),"userInvalidated",t.Aa),Ah(pl(t))),e&&(e.W.push(t.Ba),ln(e,"tokenChanged",t.qa),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Sh(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),wh(e,t),Th(e,t.J),Eh(e,t),bh(e,t.R),Ih(e,t))}function fl(t,e){var n=null,r=null;return gl(t,e.then((function(e){return n=jo(e),r=$i(e),function(t,e){var n={};return n.apiKey=dl(t).options.apiKey,n.authDomain=dl(t).options.authDomain,n.appName=dl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new yh(t,e);return n&&(i.ha=n),r&&Th(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return pl(t)&&e.uid==pl(t).uid?(Fh(pl(t),e),t.da(e)):(ll(t,e),Dh(e),t.da(e))})).then((function(){ml(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:pl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function dl(t){return t.app}function pl(t){return t.currentUser}function vl(t){return pl(t)&&pl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](vl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](vl(t))}}function gl(t,e){return t.P.push(e),e.oa((function(){X(t.P,e)})),e}function yl(){}function bl(){this.a={},this.b=1e12}$h.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),il(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=tl(t),e)return n.b.set(n.c,e,n.a)})):De()}))},_(ol,En),_(sl,Je),_(al,Je),_(ul,Je),(t=ol.prototype).yb=function(t){return gl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ia(this.a,this.aa),this.dispatchEvent(new sl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&wr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,oa(this.a,this.R),this.dispatchEvent(new al(this.R))}},t.Gc=function(t){this.J.push(t),aa(this.a,ft.SDK_VERSION?Cr(ft.SDK_VERSION,this.J):null),this.dispatchEvent(new ul(this.J))},t.Ga=function(){return J(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:dl(this).options.apiKey,authDomain:dl(this).options.authDomain,appName:dl(this).name,currentUser:pl(this)&&pl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return fl(i,wa(i.a,o))}))},t.Xc=function(t){if(!Lr())return Ce(new A("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=qr(),i=null;(!Fr()||Tr())&&dl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(dl(this).options.authDomain,dl(this).options.apiKey,dl(this).name,"signInViaPopup",t,null,r,ft.SDK_VERSION||null,null,null,this.T(),this.R));var o=gr(i,n&&n.va,n&&n.ua);return gl(this,n=cl(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Te((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=jc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&mr(o),t?ti(t):null})).o((function(t){throw o&&mr(o),t})))},t.Yc=function(t){if(!Lr())return Ce(new A("operation-not-supported-in-this-environment"));var e=this;return gl(this,cl(this).then((function(){return function(t){return il(t,(function(){return t.b.set(Zh,t.c.F,t.a)}))}(e.i)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return hl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Ce(new A("null-user"));if(this.S!=t.tenantId)return Ce(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=dl(this).options.apiKey,n.authDomain=dl(this).options.authDomain,n.appName=dl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new yh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Th(e,r),Fh(e,t),e}(t,n,e.D,e.Ga());return gl(this,this.h.then((function(){if(dl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return pl(e)&&t.uid==pl(e).uid?(Fh(pl(e),t),e.da(t)):(ll(e,r),Dh(r),e.da(r))})).then((function(){ml(e)})))},t.Bb=function(){var t=this;return gl(this,this.h.then((function(){return t.b&&zc(t.b.b),pl(t)?(ll(t,null),nl(t.i).then((function(){ml(t)}))):De()})))},t.Zc=function(){var t=this;return rl(this.i,dl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=pl(t)&&e){n=pl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Fh(pl(t),e),pl(t).I();(pl(t)||e)&&(ll(t,e),e&&(Dh(e),e.ha=t.D),t.b&&xc(t.b,t),ml(t))}}))},t.da=function(t){return el(this.i,t)},t.mc=function(){ml(this),this.da(pl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return fl(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(pl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),gl(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(vl(t)))})))}(this,(function(){t.next(pl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(pl(r)):"function"==typeof t.next&&t.next(pl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return gl(this,this.h.then((function(){return pl(e)?pl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return fl(e,ru(e.a,$a,{token:t}))})).then((function(t){var n=t.user;return Mh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return fl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return fl(n,ru(n.a,Aa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return fl(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=pl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return fl(t,t.a.Ab()).then((function(e){var n=e.user;return Mh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return pl(this)&&pl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&pl(this)&&Sh(pl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&pl(this)&&Ah(pl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),gl(this,this.h.then((function(){e.l||Q(e.s,t)&&t(vl(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(tl("local"),t.a,this.ja),this.b&&(Lc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return gl(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Pr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Lo(t)},t.xb=function(t,e){var n=this;return gl(this,De().then((function(){var t=new Ri(e);if(!t.c)throw new A("argument-error",Pi+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return gl(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return gl(this,this.a.Sa(t).then((function(t){return new ci(t)})))},t.kb=function(t){return gl(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return gl(this,De().then((function(){return void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return gl(this,Jc(this,t,e,I(this.ab,this)))},t.Vc=function(t,e){var n=this;return gl(this,De().then((function(){var r=e||fr(),i=xo(t,r);if(!(r=Lo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},yl.prototype.render=function(){},yl.prototype.reset=function(){},yl.prototype.getResponse=function(){},yl.prototype.execute=function(){};var wl=null;function Il(t,e){return(e=Tl(e))&&t.a[e]||null}function Tl(t){return(t=void 0===t?1e12:t)?t.toString():null}function El(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function _l(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sl(){}function Al(){}bl.prototype.render=function(t,e){return this.a[this.b.toString()]=new El(t,e),this.b++},bl.prototype.reset=function(t){var e=Il(this,t);t=Tl(t),e&&t&&(e.delete(),delete this.a[t])},bl.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},bl.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},El.prototype.getResponse=function(){return _l(this),this.b},El.prototype.execute=function(){_l(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},El.prototype.delete=function(){_l(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Jr(Sl,"FACTOR_ID","phone"),Al.prototype.g=function(){return wl||(wl=new bl),De(wl)},Al.prototype.c=function(){};var Nl=null;function kl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Dl=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Cl=new Gr(3e4,6e4);kl.prototype.g=function(t){var e=this;return new Te((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Cl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete a[e.a]},De(Gs(kt(Dl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kl.prototype.c=function(){this.b--};var Ol=null;function Rl(t,e,n,r,i,o,s){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Nl||(Nl=new Al),s=Nl):(Ol||(Ol=new kl),s=Ol),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ml],!a.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xl];this.a[xl]=function(t){if(Fl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,a);"function"==typeof e&&e(t)}};var h=this.a[Ll];this.a[Ll]=function(){if(Fl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Rr(h,a);"function"==typeof t&&t()}}}var xl="callback",Ll="expired-callback",Pl="sitekey",Ml="size";function Fl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Vl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Ul(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function jl(t,e,n){var r=!1;try{this.b=n||ft.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=ft.SDK_VERSION?Cr(ft.SDK_VERSION,o):null,Rl.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,R(k),r)}function ql(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Bl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Rl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Vl(this,De().then((function(){if(Pr()&&!Er())return wr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,ja,{})})).then((function(e){t.a[Pl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ul(this);var t=this;return Vl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=me(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):le(o,s)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ul(this);var t=this;return Vl(this,this.render().then((function(e){return new Te((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ul(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},_(jl,Rl);var Bl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Kl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function zl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Wl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Ql(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yl(t){return v(t)&&"string"==typeof t.uid}function $l(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=ef(r,t[n],e[n].j)}}function Zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){ql(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function tf(t,e,n,r){t[e]=ef(e,n,r)}function ef(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return ql(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(ol.prototype,{kb:{name:"applyActionCode",j:[Kl("code")]},Sa:{name:"checkActionCode",j:[Kl("code")]},ob:{name:"confirmPasswordReset",j:[Kl("code"),Kl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Kl("email"),Kl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Kl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Kl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[$l(Hl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[$l(Hl(),zl(),"nextOrObserver"),zl("opt_error",!0),zl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Kl("email"),$l(Hl("opt_actionCodeSettings",!0),Wl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Kl("email"),Hl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Kl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Ql()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Ql()]},Tc:{name:"signInWithCustomToken",j:[Kl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Kl("email"),Kl("password")]},Vc:{name:"signInWithEmailLink",j:[Kl("email"),Kl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[$l({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof yh)}},Wl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Kl("url"),Hl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Kl("code")]}}),Zl(ol.prototype,{lc:{name:"languageCode",lb:$l(Kl(),Wl(),"languageCode")},ti:{name:"tenantId",lb:$l(Kl(),Wl(),"tenantId")}}),ol.Persistence=Zu,ol.Persistence.LOCAL="local",ol.Persistence.SESSION="session",ol.Persistence.NONE="none",Jl(yh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Ql()]},rb:{name:"linkWithCredential",j:[Ql()]},Dc:{name:"linkWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ql()]},ub:{name:"reauthenticateWithCredential",j:[Ql()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Kl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[$l(Hl("opt_actionCodeSettings",!0),Wl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Kl(null,!0)]},cd:{name:"unlink",j:[Kl("provider")]},Cb:{name:"updateEmail",j:[Kl("email")]},Db:{name:"updatePassword",j:[Kl("password")]},ed:{name:"updatePhoneNumber",j:[Ql("phone")]},Eb:{name:"updateProfile",j:[Hl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Kl("email"),$l(Hl("opt_actionCodeSettings",!0),Wl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(bl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Te.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zl(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gl("appVerificationDisabledForTesting")}}),Jl($c.prototype,{confirm:{name:"confirm",j:[Kl("verificationCode")]}}),tf(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Oo,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$l(Kl(),Hl(),"json")]),tf(Ro,"credential",(function(t,e){return new Co(t,e)}),[Kl("email"),Kl("password")]),Jl(Co.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(To.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(To,"credential",Eo,[$l(Kl(),Hl(),"token")]),tf(Ro,"credentialWithLink",xo,[Kl("email"),Kl("emailLink")]),Jl(_o.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(_o,"credential",So,[$l(Kl(),Hl(),"token")]),Jl(Ao.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(Ao,"credential",No,[$l(Kl(),$l(Hl(),Wl()),"idToken"),$l(Kl(),Wl(),"accessToken",!0)]),Jl(ko.prototype,{Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),tf(ko,"credential",Do,[$l(Kl(),Hl(),"token"),Kl("secret",!0)]),Jl(Io.prototype,{Ca:{name:"addScope",j:[Kl("scope")]},credential:{name:"credential",j:[$l(Kl(),$l(Hl(),Wl()),"optionsOrIdToken"),$l(Kl(),Wl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Jl(mo.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(fo.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),tf(Vo,"credential",Uo,[Kl("verificationId"),Kl("verificationCode")]),Jl(Vo.prototype,{gb:{name:"verifyPhoneNumber",j:[$l(Kl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xl(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xl(t.session,co)&&Yl(t.multiFactorHint):t.session&&t.multiFactorUid?Xl(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Po.prototype,{w:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(A.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(Qo.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(Wo.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(rh.prototype,{toJSON:{name:"toJSON",j:[Kl(null,!0)]}}),Jl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Jl(ch.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Kl("displayName",!0)]},bd:{name:"unenroll",j:[$l({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Yl},Kl(),"multiFactorInfoIdentifier")]}}),Jl(jl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tf(Ei,"parseLink",Oi,[Kl("link")]),tf(Sl,"assertion",(function(t){return new ah(t)}),[Ql("phone")]),function(){if(void 0===ft||!ft.INTERNAL||!ft.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ol,AuthCredential:ho,Error:A};tf(t,"EmailAuthProvider",Ro,[]),tf(t,"FacebookAuthProvider",To,[]),tf(t,"GithubAuthProvider",_o,[]),tf(t,"GoogleAuthProvider",Ao,[]),tf(t,"TwitterAuthProvider",ko,[]),tf(t,"OAuthProvider",Io,[Kl("providerId")]),tf(t,"SAMLAuthProvider",wo,[Kl("providerId")]),tf(t,"PhoneAuthProvider",Vo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ol)}}]),tf(t,"RecaptchaVerifier",jl,[$l(Kl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof ft.app.App)}}]),tf(t,"ActionCodeURL",Ei,[]),tf(t,"PhoneMultiFactorGenerator",Sl,[]),ft.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ol(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),ft.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ft.registerVersion("@firebase/auth","0.16.8"),ft.INTERNAL.extendNamespace({User:yh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function vt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var mt,gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},yt=yt||{},bt=gt||self;function wt(){}function It(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),_t=0;function St(t,e,n){return t.call.apply(t.bind,arguments)}function At(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Nt(t,e,n){return(Nt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?St:At).apply(null,arguments)}function kt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Dt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ct(){this.s=this.s,this.o=this.o}var Ot={};Ct.prototype.s=!1,Ct.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Et)&&t[Et]||(t[Et]=++_t)}(this);delete Ot[t]}},Ct.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},xt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Lt(t){return Array.prototype.concat.apply([],arguments)}function Pt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Mt(t){return/^[\s\xa0]*$/.test(t)}var Ft,Vt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ut(t,e){return-1!=t.indexOf(e)}function jt(t,e){return t<e?-1:t>e?1:0}t:{var qt=bt.navigator;if(qt){var Bt=qt.userAgent;if(Bt){Ft=Bt;break t}}Ft=""}function Kt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Gt(t){var e={};for(var n in t)e[n]=t[n];return e}var Ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ht.length;o++)n=Ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Wt(t){return Wt[" "](t),t}Wt[" "]=wt;var Qt,Xt,Yt=Ut(Ft,"Opera"),$t=Ut(Ft,"Trident")||Ut(Ft,"MSIE"),Jt=Ut(Ft,"Edge"),Zt=Jt||$t,te=Ut(Ft,"Gecko")&&!(Ut(Ft.toLowerCase(),"webkit")&&!Ut(Ft,"Edge"))&&!(Ut(Ft,"Trident")||Ut(Ft,"MSIE"))&&!Ut(Ft,"Edge"),ee=Ut(Ft.toLowerCase(),"webkit")&&!Ut(Ft,"Edge");function ne(){var t=bt.document;return t?t.documentMode:void 0}t:{var re="",ie=(Xt=Ft,te?/rv:([^\);]+)(\)|;)/.exec(Xt):Jt?/Edge\/([\d\.]+)/.exec(Xt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):ee?/WebKit\/(\S+)/.exec(Xt):Yt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(ie&&(re=ie?ie[1]:""),$t){var oe=ne();if(null!=oe&&oe>parseFloat(re)){Qt=String(oe);break t}}Qt=re}var se,ae={};function ue(){return t=ae,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=Vt(String(Qt)).split("."),n=Vt("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=jt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||jt(0==o[2].length,0==s[2].length)||jt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}bt.document&&$t?se=ne()||parseInt(Qt,10)||void 0:se=void 0;var ce=se,he=function(){if(!bt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{bt.addEventListener("test",wt,e),bt.removeEventListener("test",wt,e)}catch(t){}return t}();function le(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function fe(t,e){if(le.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(te){t:{try{Wt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:de[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&fe.Z.h.call(this)}}le.prototype.h=function(){this.defaultPrevented=!0},Dt(fe,le);var de={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),ve=0;function me(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ve,this.ca=this.fa=!1}function ge(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function ye(t){this.src=t,this.g={},this.h=0}function be(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Rt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ge(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function we(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}ye.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=we(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new me(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Ie="closure_lm_"+(1e6*Math.random()|0),Te={};function Ee(t,e,n,r,i){if(r&&r.once)return Se(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ee(t,e[o],n,r,i);return null}return n=Re(n),t&&t[pe]?t.N(e,n,Tt(r)?!!r.capture:!!r,i):_e(t,e,n,!1,r,i)}function _e(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Tt(i)?!!i.capture:!!i,a=Ce(t);if(a||(t[Ie]=a=new ye(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=De;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)he||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ke(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Se(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Se(t,e[o],n,r,i);return null}return n=Re(n),t&&t[pe]?t.O(e,n,Tt(r)?!!r.capture:!!r,i):_e(t,e,n,!0,r,i)}function Ae(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ae(t,e[o],n,r,i);else r=Tt(r)?!!r.capture:!!r,n=Re(n),t&&t[pe]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=we(o=t.g[e],n,r,i))&&(ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Ce(t))&&(e=t.g[e.toString()],t=-1,e&&(t=we(e,n,r,i)),(n=-1<t?e[t]:null)&&Ne(n))}function Ne(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[pe])be(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ke(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ce(e))?(be(n,t),0==n.h&&(n.src=null,e[Ie]=null)):ge(t)}}}function ke(t){return t in Te?Te[t]:Te[t]="on"+t}function De(t,e){if(t.ca)t=!0;else{e=new fe(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Ne(t),t=n.call(r,e)}return t}function Ce(t){return(t=t[Ie])instanceof ye?t:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(t){return"function"==typeof t?t:(t[Oe]||(t[Oe]=function(e){return t.handleEvent(e)}),t[Oe])}function xe(){Ct.call(this),this.i=new ye(this),this.P=this,this.I=null}function Le(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new le(e,t);else if(e instanceof le)e.target=e.target||t;else{var i=e;zt(e=new le(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Pe(s,r,!0,e)&&i}if(i=Pe(s=e.g=t,r,!0,e)&&i,i=Pe(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Pe(s=e.g=n[o],r,!1,e)&&i}function Pe(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&be(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Dt(xe,Ct),xe.prototype[pe]=!0,xe.prototype.removeEventListener=function(t,e,n,r){Ae(this,t,e,n,r)},xe.prototype.M=function(){if(xe.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ge(n[r]);delete e.g[t],e.h--}}this.I=null},xe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},xe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Me=bt.JSON.stringify;function Fe(){var t=He,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ve,Ue=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=je.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),je=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new qe}),(function(t){return t.reset()})),qe=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Be(t){bt.setTimeout((function(){throw t}),0)}function Ke(t,e){Ve||function(){var t=bt.Promise.resolve(void 0);Ve=function(){t.then(ze)}}(),Ge||(Ve(),Ge=!0),He.add(t,e)}var Ge=!1,He=new Ue;function ze(){for(var t;t=Fe();){try{t.h.call(t.g)}catch(t){Be(t)}var e=je;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ge=!1}function We(t,e){xe.call(this),this.h=t||1,this.g=e||bt,this.j=Nt(this.kb,this),this.l=Date.now()}function Qe(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Xe(t,e,n){if("function"==typeof t)n&&(t=Nt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Nt(t.handleEvent,t)}return 2147483647<Number(e)?-1:bt.setTimeout(t,e||0)}function Ye(t){t.g=Xe((function(){t.g=null,t.i&&(t.i=!1,Ye(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Dt(We,xe),(mt=We.prototype).da=!1,mt.S=null,mt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Le(this,"tick"),this.da&&(Qe(this),this.start()))}},mt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.M=function(){We.Z.M.call(this),Qe(this),delete this.g};var $e=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Ye(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Ct);function Je(t){Ct.call(this),this.h=t,this.g={}}Dt(Je,Ct);var Ze=[];function tn(t,e,n,r){Array.isArray(n)||(n&&(Ze[0]=n.toString()),n=Ze);for(var i=0;i<n.length;i++){var o=Ee(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function en(t){Kt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Ne(t)}),t),t.g={}}function nn(){this.g=!0}function rn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Me(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Je.prototype.M=function(){Je.Z.M.call(this),en(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nn.prototype.Aa=function(){this.g=!1},nn.prototype.info=function(){};var on={},sn=null;function an(){return sn=sn||new xe}function un(t){le.call(this,on.Ma,t)}function cn(t){var e=an();Le(e,new un(e,t))}function hn(t,e){le.call(this,on.STAT_EVENT,t),this.stat=e}function ln(t){var e=an();Le(e,new hn(e,t))}function fn(t,e){le.call(this,on.Na,t),this.size=e}function dn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return bt.setTimeout((function(){t()}),e)}on.Ma="serverreachability",Dt(un,le),on.STAT_EVENT="statevent",Dt(hn,le),on.Na="timingevent",Dt(fn,le);var pn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function mn(){}function gn(t){return t.h||(t.h=t.i())}function yn(){}mn.prototype.h=null;var bn,wn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function In(){le.call(this,"d")}function Tn(){le.call(this,"c")}function En(){}function _n(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Je(this),this.P=An,t=Zt?125:void 0,this.W=new We(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Sn}function Sn(){this.i=null,this.g="",this.h=!1}Dt(In,le),Dt(Tn,le),Dt(En,mn),En.prototype.g=function(){return new XMLHttpRequest},En.prototype.i=function(){return{}},bn=new En;var An=45e3,Nn={},kn={};function Dn(t,e,n){t.K=1,t.v=Jn(zn(e)),t.s=n,t.U=!0,Cn(t,null)}function Cn(t,e){t.F=Date.now(),Ln(t),t.A=zn(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),lr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Sn,t.g=fi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new $e(Nt(t.Ia,t,t.g),t.O)),tn(t.V,t.g,"readystatechange",t.gb),e=t.H?Gt(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),cn(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function On(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Rn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=xn(t,n))==kn){4==e&&(t.o=4,ln(14),i=!1),rn(t.j,t.m,null,"[Incomplete Response]");break}if(r==Nn){t.o=4,ln(15),rn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}rn(t.j,t.m,r,null),Un(t,r)}On(t)&&r!=kn&&r!=Nn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ln(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ii(e),e.L=!0,ln(11))):(rn(t.j,t.m,n,"[Invalid Chunked Response]"),Vn(t),Fn(t))}function xn(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?kn:(n=Number(e.substring(n,r)),isNaN(n)?Nn:(r+=1)+n>e.length?kn:(e=e.substr(r,n),t.C=r+n,e))}function Ln(t){t.Y=Date.now()+t.P,Pn(t,t.P)}function Pn(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=dn(Nt(t.eb,t),e)}function Mn(t){t.B&&(bt.clearTimeout(t.B),t.B=null)}function Fn(t){0==t.l.G||t.I||ai(t.l,t)}function Vn(t){Mn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Qe(t.W),en(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Un(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||yr(n.i,t)))if(n.I=t.N,!t.J&&yr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;si(n),Xr(n)}ri(n),ln(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=dn(Nt(n.ab,n),6e3));if(1>=gr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ci(n,11)}else if((t.J||n.g==t)&&si(n),!Mt(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(Ut(h,"spdy")||Ut(h,"quic")||Ut(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(br(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,$n(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=li(r,r.H?r.la:null,r.W),d.J){wr(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Mn(p),Ln(p)),r.g=d}else ni(r);0<n.l.length&&Jr(n)}else"stop"!=o[0]&&"close"!=o[0]||ci(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ci(n,7):Qr(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}cn(4)}catch(o){}}function jn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(It(t)||"string"==typeof t)xt(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(It(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(It(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qn(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qn)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bn(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Kn(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Kn(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Kn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(mt=_n.prototype).setTimeout=function(t){this.P=t},mt.gb=function(t){t=t.target;var e=this.L;e&&3==Kr(t)?e.l():this.Ia(t)},mt.Ia=function(t){try{if(t==this.g)t:{var e=Kr(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Zt||this.g&&(this.h.h||this.g.ga()||Gr(this.g)))){this.I||4!=e||7==n||cn(8==n||0>=r?3:2),Mn(this);var i=this.g.ba();this.N=i;e:if(On(this)){var o=Gr(this.g);t="";var s=o.length,a=4==Kr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vn(this),Fn(this);var u="";break e}this.h.i=new bt.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mt(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,ln(12),Vn(this),Fn(this);break t}rn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Un(this,i)}this.U?(Rn(this,e,u),Zt&&this.i&&3==e&&(tn(this.V,this.W,"tick",this.fb),this.W.start())):(rn(this.j,this.m,u,null),Un(this,u)),4==e&&Vn(this),this.i&&!this.I&&(4==e?ai(this.l,this):(this.i=!1,Ln(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ln(12)):(this.o=0,ln(13)),Vn(this),Fn(this)}}}catch(e){}},mt.fb=function(){if(this.g){var t=Kr(this.g),e=this.g.ga();this.C<e.length&&(Mn(this),Rn(this,t,e),this.i&&4!=t&&Ln(this))}},mt.cancel=function(){this.I=!0,Vn(this)},mt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(cn(3),ln(17)),Vn(this),this.o=2,Fn(this)):Pn(this,this.Y-t)},(mt=qn.prototype).R=function(){Bn(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},mt.T=function(){return Bn(this),this.g.concat()},mt.get=function(t,e){return Kn(this.h,t)?this.h[t]:e},mt.set=function(t,e){Kn(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},mt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Gn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hn(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Hn){this.g=void 0!==e?e:t.g,Wn(this,t.j),this.s=t.s,Qn(this,t.i),Xn(this,t.m),this.l=t.l,e=t.h;var n=new ar;n.i=e.i,e.g&&(n.g=new qn(e.g),n.h=e.h),Yn(this,n),this.o=t.o}else t&&(n=String(t).match(Gn))?(this.g=!!e,Wn(this,n[1]||"",!0),this.s=Zn(n[2]||""),Qn(this,n[3]||"",!0),Xn(this,n[4]),this.l=Zn(n[5]||"",!0),Yn(this,n[6]||"",!0),this.o=Zn(n[7]||"")):(this.g=!!e,this.h=new ar(null,this.g))}function zn(t){return new Hn(t)}function Wn(t,e,n){t.j=n?Zn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qn(t,e,n){t.i=n?Zn(e,!0):e}function Xn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Yn(t,e,n){e instanceof ar?(t.h=e,function(t,e){e&&!t.j&&(ur(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(cr(this,e),lr(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=tr(e,or)),t.h=new ar(e,t.g))}function $n(t,e,n){t.h.set(e,n)}function Jn(t){return $n(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function tr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,er),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function er(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(tr(e,nr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(tr(e,nr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(tr(n,"/"==n.charAt(0)?ir:rr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",tr(n,sr)),t.join("")};var nr=/[#\/\?@]/g,rr=/[#\?:]/g,ir=/[#\?]/g,or=/[#\?@]/g,sr=/#/g;function ar(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ur(t){t.g||(t.g=new qn,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function cr(t,e){ur(t),e=fr(t,e),Kn(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Kn((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Bn(t)))}function hr(t,e){return ur(t),e=fr(t,e),Kn(t.g.h,e)}function lr(t,e,n){cr(t,e),0<n.length&&(t.i=null,t.g.set(fr(t,e),Pt(n)),t.h+=n.length)}function fr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(mt=ar.prototype).add=function(t,e){ur(this),this.i=null,t=fr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},mt.forEach=function(t,e){ur(this),this.g.forEach((function(n,r){xt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},mt.T=function(){ur(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},mt.R=function(t){ur(this);var e=[];if("string"==typeof t)hr(this,t)&&(e=Lt(e,this.g.get(fr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Lt(e,t[n])}return e},mt.set=function(t,e){return ur(this),this.i=null,hr(this,t=fr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},mt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var dr=function(t,e){this.h=t,this.g=e};function pr(t){this.l=t||vr,t=bt.PerformanceNavigationTiming?0<(t=bt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(bt.g&&bt.g.Ea&&bt.g.Ea()&&bt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vr=10;function mr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function gr(t){return t.h?1:t.g?t.g.size:0}function yr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function br(t,e){t.g?t.g.add(e):t.h=e}function wr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Ir(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=vt(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Pt(t.i)}function Tr(){}function Er(){this.g=new Tr}function _r(t,e,n){var r=n||"";try{jn(t,(function(t,n){var i=t;Tt(t)&&(i=Me(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Sr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Ar(t){this.l=t.$b||null,this.j=t.ib||!1}function Nr(t,e){xe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=kr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pr.prototype.cancel=function(){var t,e;if(this.i=Ir(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=vt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Tr.prototype.stringify=function(t){return bt.JSON.stringify(t,void 0)},Tr.prototype.parse=function(t){return bt.JSON.parse(t,void 0)},Dt(Ar,mn),Ar.prototype.g=function(){return new Nr(this.l,this.j)},Ar.prototype.i=function(t){return function(){return t}}({}),Dt(Nr,xe);var kr=0;function Dr(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Cr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Or(t)}function Or(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(mt=Nr.prototype).open=function(t,e){if(this.readyState!=kr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Or(this)},mt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cr(this)),this.readyState=kr},mt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==bt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Dr(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},mt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cr(this):Or(this),3==this.readyState&&Dr(this)}},mt.Ua=function(t){this.g&&(this.response=this.responseText=t,Cr(this))},mt.Ta=function(t){this.g&&(this.response=t,Cr(this))},mt.ha=function(){this.g&&Cr(this)},mt.setRequestHeader=function(t,e){this.v.append(t,e)},mt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Nr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Rr=bt.JSON.parse;function xr(t){xe.call(this),this.headers=new qn,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Lr,this.K=this.L=!1}Dt(xr,xe);var Lr="",Pr=/^https?$/i,Mr=["POST","PUT"];function Fr(t){return"content-type"==t.toLowerCase()}function Vr(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ur(t),qr(t)}function Ur(t){t.D||(t.D=!0,Le(t,"complete"),Le(t,"error"))}function jr(t){if(t.h&&void 0!==yt&&(!t.C[1]||4!=Kr(t)||2!=t.ba()))if(t.v&&4==Kr(t))Xe(t.Fa,0,t);else if(Le(t,"readystatechange"),4==Kr(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Gn)[1]||null;if(!o&&bt.self&&bt.self.location){var s=bt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Pr.test(o?o.toLowerCase():"")}e=i}if(e)Le(t,"complete"),Le(t,"success");else{t.m=6;try{var a=2<Kr(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",Ur(t)}}finally{qr(t)}}}function qr(t,e){if(t.g){Br(t);var n=t.g,r=t.C[0]?wt:null;t.g=null,t.C=null,e||Le(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Br(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(bt.clearTimeout(t.A),t.A=null)}function Kr(t){return t.g?t.g.readyState:0}function Gr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Lr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Hr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Kt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$n(t,e,n))}function zr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wr(t){this.za=0,this.l=[],this.h=new nn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=zr("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=zr("baseRetryDelayMs",5e3,t),this.$a=zr("retryDelaySeedMs",1e4,t),this.Ya=zr("forwardChannelMaxRetries",2,t),this.ra=zr("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new pr(t&&t.concurrentRequestLimit),this.Ca=new Er,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Qr(t){if(Yr(t),3==t.G){var e=t.V++,n=zn(t.F);$n(n,"SID",t.J),$n(n,"RID",e),$n(n,"TYPE","terminate"),ti(t,n),(e=new _n(t,t.h,e,void 0)).K=2,e.v=Jn(zn(n)),n=!1,bt.navigator&&bt.navigator.sendBeacon&&(n=bt.navigator.sendBeacon(e.v.toString(),"")),!n&&bt.Image&&((new Image).src=e.v,n=!0),n||(e.g=fi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ln(e)}hi(t)}function Xr(t){t.g&&(ii(t),t.g.cancel(),t.g=null)}function Yr(t){Xr(t),t.u&&(bt.clearTimeout(t.u),t.u=null),si(t),t.i.cancel(),t.m&&("number"==typeof t.m&&bt.clearTimeout(t.m),t.m=null)}function $r(t,e){t.l.push(new dr(t.Za++,e)),3==t.G&&Jr(t)}function Jr(t){mr(t.i)||t.m||(t.m=!0,Ke(t.Ha,t),t.C=0)}function Zr(t,e){var n;n=e?e.m:t.V++;var r=zn(t.F);$n(r,"SID",t.J),$n(r,"RID",n),$n(r,"AID",t.U),ti(t,r),t.o&&t.s&&Hr(r,t.o,t.s),n=new _n(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=ei(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),br(t.i,n),Dn(n,r,e)}function ti(t,e){t.j&&jn({},(function(t,n){$n(e,n,t)}))}function ei(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Nt(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{_r(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function ni(t){t.g||t.u||(t.Y=1,Ke(t.Ga,t),t.A=0)}function ri(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=dn(Nt(t.Ga,t),ui(t,t.A)),t.A++,0))}function ii(t){null!=t.B&&(bt.clearTimeout(t.B),t.B=null)}function oi(t){t.g=new _n(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=zn(t.oa);$n(e,"RID","rpc"),$n(e,"SID",t.J),$n(e,"CI",t.N?"0":"1"),$n(e,"AID",t.U),ti(t,e),$n(e,"TYPE","xmlhttp"),t.o&&t.s&&Hr(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Jn(zn(e)),n.s=null,n.U=!0,Cn(n,t)}function si(t){null!=t.v&&(bt.clearTimeout(t.v),t.v=null)}function ai(t,e){var n=null;if(t.g==e){si(t),ii(t),t.g=null;var r=2}else{if(!yr(t.i,e))return;n=e.D,wr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Le(r=an(),new fn(r,n,e,i)),Jr(t)}else ni(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(gr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=dn(Nt(t.Ha,t,e),ui(t,t.C)),t.C++,0)))}(t,e)||2==r&&ri(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ci(t,5);break;case 4:ci(t,10);break;case 3:ci(t,6);break;default:ci(t,2)}}function ui(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ci(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Nt(t.jb,t);n||(n=new Hn("//www.google.com/images/cleardot.gif"),bt.location&&"http"==bt.location.protocol||Wn(n,"https"),Jn(n)),function(t,e){var n=new nn;if(bt.Image){var r=new Image;r.onload=kt(Sr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=kt(Sr,n,r,"TestLoadImage: error",!1,e),r.onabort=kt(Sr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=kt(Sr,n,r,"TestLoadImage: timeout",!1,e),bt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ln(2);t.G=0,t.j&&t.j.va(e),hi(t),Yr(t)}function hi(t){t.G=0,t.I=-1,t.j&&(0==Ir(t.i).length&&0==t.l.length||(t.i.i.length=0,Pt(t.l),t.l.length=0),t.j.ua())}function li(t,e,n){var r=function(t){return t instanceof Hn?zn(t):new Hn(t,void 0)}(n);if(""!=r.i)e&&Qn(r,e+"."+r.i),Xn(r,r.m);else{var i=bt.location;r=function(t,e,n,r){var i=new Hn(null,void 0);return t&&Wn(i,t),e&&Qn(i,e),n&&Xn(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Kt(t.aa,(function(t,e){$n(r,e,t)})),e=t.D,n=t.sa,e&&n&&$n(r,e,n),$n(r,"VER",t.ma),ti(t,r),r}function fi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new xr(new Ar({ib:!0})):new xr(t.qa)).L=t.H,e}function di(){}function pi(){if($t&&!(10<=Number(ce)))throw Error("Environmental error: no available transport.")}function vi(t,e){xe.call(this),this.g=new Wr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Mt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mt(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new yi(this)}function mi(t){In.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function gi(){Tn.call(this),this.status=1}function yi(t){this.g=t}(mt=xr.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bn.g(),this.C=this.u?gn(this.u):gn(bn),this.g.onreadystatechange=Nt(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Vr(this,t)}t=n||"";var i=new qn(this.headers);r&&jn(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Fr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=bt.FormData&&t instanceof bt.FormData,!(0<=Rt(Mr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Br(this),0<this.B&&((this.K=function(t){return $t&&ue()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nt(this.pa,this)):this.A=Xe(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Vr(this,t)}},mt.pa=function(){void 0!==yt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Le(this,"timeout"),this.abort(8))},mt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Le(this,"complete"),Le(this,"abort"),qr(this))},mt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qr(this,!0)),xr.Z.M.call(this)},mt.Fa=function(){this.s||(this.F||this.v||this.l?jr(this):this.cb())},mt.cb=function(){jr(this)},mt.ba=function(){try{return 2<Kr(this)?this.g.status:-1}catch(t){return-1}},mt.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},mt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Rr(e)}},mt.Da=function(){return this.m},mt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Wr.prototype).ma=8,mt.G=1,mt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},mt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new _n(this,this.h,t,void 0),n=this.s;if(this.P&&(n?zt(n=Gt(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=ei(this,e,r),$n(i=zn(this.F),"RID",t),$n(i,"CVER",22),this.D&&$n(i,"X-HTTP-Session-Id",this.D),ti(this,i),this.o&&n&&Hr(i,this.o,n),br(this.i,e),this.Ra&&$n(i,"TYPE","init"),this.ja?($n(i,"$req",r),$n(i,"SID","null"),e.$=!0,Dn(e,i,null)):Dn(e,i,r),this.G=2}}else 3==this.G&&(t?Zr(this,t):0==this.l.length||mr(this.i)||Zr(this))},mt.Ga=function(){if(this.u=null,oi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=dn(Nt(this.bb,this),t)}},mt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ln(10),Xr(this),oi(this))},mt.ab=function(){null!=this.v&&(this.v=null,Xr(this),ri(this),ln(19))},mt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ln(2)):(this.h.info("Failed to ping google.com"),ln(1))},(mt=di.prototype).xa=function(){},mt.wa=function(){},mt.va=function(){},mt.ua=function(){},mt.Oa=function(){},pi.prototype.g=function(t,e){return new vi(t,e)},Dt(vi,xe),vi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ke(Nt(t.hb,t,e))),ln(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=li(t,null,t.W),Jr(t)},vi.prototype.close=function(){Qr(this.g)},vi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,$r(this.g,e)}else this.v?((e={}).__data__=Me(t),$r(this.g,e)):$r(this.g,t)},vi.prototype.M=function(){this.g.j=null,delete this.j,Qr(this.g),delete this.g,vi.Z.M.call(this)},Dt(mi,In),Dt(gi,Tn),Dt(yi,di),yi.prototype.xa=function(){Le(this.g,"a")},yi.prototype.wa=function(t){Le(this.g,new mi(t))},yi.prototype.va=function(t){Le(this.g,new gi(t))},yi.prototype.ua=function(){Le(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,vi.prototype.send=vi.prototype.u,vi.prototype.open=vi.prototype.m,vi.prototype.close=vi.prototype.close,pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,vn.COMPLETE="complete",yn.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",xe.prototype.listen=xe.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.La,xr.prototype.getLastErrorCode=xr.prototype.Da,xr.prototype.getStatus=xr.prototype.ba,xr.prototype.getResponseJson=xr.prototype.Qa,xr.prototype.getResponseText=xr.prototype.ga,xr.prototype.send=xr.prototype.ea;var bi=pn,wi=vn,Ii=on,Ti=10,Ei=11,_i=Ar,Si=yn,Ai=xr,Ni=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ni.o=-1;var ki={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Di=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return g(e,t),e}(Error),Ci=new $("@firebase/firestore");function Oi(){return Ci.logLevel}function Ri(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=G.DEBUG){var r=e.map(Pi);Ci.debug.apply(Ci,E(["Firestore (8.7.0): "+t],r))}}function xi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=G.ERROR){var r=e.map(Pi);Ci.error.apply(Ci,E(["Firestore (8.7.0): "+t],r))}}function Li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ci.logLevel<=G.WARN){var r=e.map(Pi);Ci.warn.apply(Ci,E(["Firestore (8.7.0): "+t],r))}}function Pi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Mi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw xi(e),new Error(e)}function Fi(t,e){t||Mi()}function Vi(t,e){return t}function Ui(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ji=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ui(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function qi(t,e){return t<e?-1:t>e?1:0}function Bi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ki(t){return t+"\0"}var Gi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Di(ki.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Di(ki.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Di(ki.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Di(ki.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?qi(this.nanoseconds,t.nanoseconds):qi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Hi=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Gi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function zi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qi(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mi(),void 0===n?n=t.length-e:n>t.length-e&&Mi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Di(ki.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Xi),$i=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return $i.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Di(ki.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Di(ki.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Di(ki.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Di(ki.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Xi),Zi=function(){function t(t){this.fields=t,t.sort(Ji.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Bi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),to=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return qi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();to.EMPTY_BYTE_STRING=new to("");var eo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(t){if(Fi(!!t),"string"==typeof t){var e=0,n=eo.exec(t);if(Fi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ro(t.seconds),nanos:ro(t.nanos)}}function ro(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function io(t){return"string"==typeof t?to.fromBase64String(t):to.fromUint8Array(t)}function oo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function so(t){var e=t.mapValue.fields.__previous_value__;return oo(e)?so(e):e}function ao(t){var e=no(t.mapValue.fields.__local_write_time__.timestampValue);return new Gi(e.seconds,e.nanos)}function uo(t){return null==t}function co(t){return 0===t&&1/t==-1/0}function ho(t){return"number"==typeof t&&Number.isInteger(t)&&!co(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var lo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yi.fromString(e))},t.fromName=function(e){return new t(Yi.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yi.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yi.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yi(e.slice()))},t}();function fo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oo(t)?4:10:Mi()}function po(t,e){var n=fo(t);if(n!==fo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ao(t).isEqual(ao(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=no(t.timestampValue),r=no(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return io(t.bytesValue).isEqual(io(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ro(t.geoPointValue.latitude)===ro(e.geoPointValue.latitude)&&ro(t.geoPointValue.longitude)===ro(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ro(t.integerValue)===ro(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ro(t.doubleValue),r=ro(e.doubleValue);return n===r?co(n)===co(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Bi(t.arrayValue.values||[],e.arrayValue.values||[],po);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(zi(n)!==zi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!po(n[i],r[i])))return!1;return!0}(t,e);default:return Mi()}}function vo(t,e){return void 0!==(t.values||[]).find((function(t){return po(t,e)}))}function mo(t,e){var n=fo(t),r=fo(e);if(n!==r)return qi(n,r);switch(n){case 0:return 0;case 1:return qi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ro(t.integerValue||t.doubleValue),r=ro(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return go(t.timestampValue,e.timestampValue);case 4:return go(ao(t),ao(e));case 5:return qi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=io(t),r=io(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=qi(n[i],r[i]);if(0!==o)return o}return qi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=qi(ro(t.latitude),ro(e.latitude));return 0!==n?n:qi(ro(t.longitude),ro(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=mo(n[i],r[i]);if(o)return o}return qi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=qi(r[s],o[s]);if(0!==a)return a;var u=mo(n[r[s]],i[o[s]]);if(0!==u)return u}return qi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mi()}}function go(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return qi(t,e);var n=no(t),r=no(e),i=qi(n.seconds,r.seconds);return 0!==i?i:qi(n.nanos,r.nanos)}function yo(t){return bo(t)}function bo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=no(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?io(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,lo.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=bo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+bo(t.fields[o])}return e+"}"}(t.mapValue):Mi();var e,n}function wo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Io(t){return!!t&&"integerValue"in t}function To(t){return!!t&&"arrayValue"in t}function Eo(t){return!!t&&"nullValue"in t}function _o(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function So(t){return!!t&&"mapValue"in t}function Ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},no(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Ao(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ao(t.arrayValue.values[r]);return n}return Object.assign({},t)}var No=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!So(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ao(e)},t.prototype.setAll=function(t){var e=this,n=Ji.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Ao(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());So(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return po(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];So(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Wi(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Ao(this.value))},t}();function ko(t){var e=[];return Wi(t.fields,(function(t,n){var r=new Ji([t]);if(So(n)){var i=ko(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Zi(e)}var Do=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Hi.min(),No.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,No.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,No.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=No.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=No.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Co=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Oo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Co(t,e,n,r,i,o,s)}function Ro(t){var e=Vi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+yo(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),uo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ho(e.startAt)),e.endAt&&(n+="|ub:",n+=Ho(e.endAt)),e.h=n}return e.h}function xo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Wo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!po(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xo(t.startAt,e.startAt)&&Xo(t.endAt,e.endAt)}function Lo(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Po=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return g(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Mo(t,n,r):"array-contains"===n?new jo(t,r):"in"===n?new qo(t,r):"not-in"===n?new Bo(t,r):"array-contains-any"===n?new Ko(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Fo(t,n):new Vo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(mo(e,this.value)):null!==e&&fo(this.value)===fo(e)&&this.m(mo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Mo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lo.fromName(r.referenceValue),i}return g(e,t),e.prototype.matches=function(t){var e=lo.comparator(t.key,this.key);return this.m(e)},e}(Po),Fo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Uo(0,n),r}return g(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Po),Vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Uo(0,n),r}return g(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Po);function Uo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return lo.fromName(t.referenceValue)}))}var jo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return g(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return To(e)&&vo(e.arrayValue,this.value)},e}(Po),qo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return g(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&vo(this.value.arrayValue,e)},e}(Po),Bo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return g(e,t),e.prototype.matches=function(t){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!vo(this.value.arrayValue,e)},e}(Po),Ko=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return g(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!To(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return vo(e.value.arrayValue,t)}))},e}(Po),Go=function(t,e){this.position=t,this.before=e};function Ho(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return yo(t)})).join(",")}var zo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Wo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Qo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?lo.comparator(lo.fromName(s.referenceValue),n.key):mo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Xo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!po(t.position[n],e.position[n]))return!1;return!0}var Yo=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function $o(t,e,n,r,i,o,s,a){return new Yo(t,e,n,r,i,o,s,a)}function Jo(t){return new Yo(t)}function Zo(t){return!uo(t.limit)&&"F"===t.limitType}function ts(t){return!uo(t.limit)&&"L"===t.limitType}function es(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ns(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function rs(t){return null!==t.collectionGroup}function is(t){var e=Vi(t);if(null===e.p){e.p=[];var n=ns(e),r=es(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new zo(n)),e.p.push(new zo(Ji.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new zo(Ji.keyField(),u))}}}return e.p}function os(t){var e=Vi(t);if(!e.T)if("F"===e.limitType)e.T=Oo(e.path,e.collectionGroup,is(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=is(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new zo(o.field,s))}var a=e.endAt?new Go(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Go(e.startAt.position,!e.startAt.before):null;e.T=Oo(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ss(t,e,n){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function as(t,e){return xo(os(t),os(e))&&t.limitType===e.limitType}function us(t){return Ro(os(t))+"|lt:"+t.limitType}function cs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+yo(e.value);var e})).join(", ")+"]"),uo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Ho(t.startAt)),t.endAt&&(e+=", endAt: "+Ho(t.endAt)),"Target("+e+")"}(os(t))+"; limitType="+t.limitType+")"}function hs(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):lo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Qo(t.startAt,is(t),e)||t.endAt&&Qo(t.endAt,is(t),e))}(t,e)}function ls(t){return function(e,n){for(var r=!1,i=0,o=is(t);i<o.length;i++){var s=o[i],a=fs(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function fs(t,e,n){var r=t.field.isKeyField()?lo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?mo(r,i):Mi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mi()}}function ds(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:co(e)?"-0":e}}function ps(t){return{integerValue:""+t}}function vs(t,e){return ho(e)?ps(e):ds(t,e)}var ms=function(){this._=void 0};function gs(t,e,n){return t instanceof ws?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Is?Ts(t,e):t instanceof Es?_s(t,e):function(t,e){var n=bs(t,e),r=As(n)+As(t.A);return Io(n)&&Io(t.A)?ps(r):ds(t.R,r)}(t,e)}function ys(t,e,n){return t instanceof Is?Ts(t,e):t instanceof Es?_s(t,e):n}function bs(t,e){return t instanceof Ss?Io(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var ws=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e}(ms),Is=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return g(e,t),e}(ms);function Ts(t,e){for(var n=Ns(e),r=function(t){n.some((function(e){return po(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Es=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return g(e,t),e}(ms);function _s(t,e){for(var n=Ns(e),r=function(t){n=n.filter((function(e){return!po(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ss=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return g(e,t),e}(ms);function As(t){return ro(t.integerValue||t.doubleValue)}function Ns(t){return To(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ks=function(t,e){this.field=t,this.transform=e},Ds=function(t,e){this.version=t,this.transformResults=e},Cs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Os(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Rs=function(){};function xs(t,e,n){t instanceof Vs?function(t,e,n){var r=t.value.clone(),i=qs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Us?function(t,e,n){if(Os(t.precondition,e)){var r=qs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(js(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ls(t,e,n){t instanceof Vs?function(t,e,n){if(Os(t.precondition,e)){var r=t.value.clone(),i=Bs(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Fs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Us?function(t,e,n){if(Os(t.precondition,e)){var r=Bs(t.fieldTransforms,n,e),i=e.data;i.setAll(js(t)),i.setAll(r),e.convertToFoundDocument(Fs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Os(t.precondition,e)&&e.convertToNoDocument(Hi.min())}(t,e)}function Ps(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=bs(o.transform,s||null);null!=a&&(null==n&&(n=No.empty()),n.set(o.field,a))}return n||null}function Ms(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Bi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Is&&e instanceof Is||t instanceof Es&&e instanceof Es?Bi(t.elements,e.elements,po):t instanceof Ss&&e instanceof Ss?po(t.A,e.A):t instanceof ws&&e instanceof ws}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Fs(t){return t.isFoundDocument()?t.version:Hi.min()}var Vs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return g(e,t),e}(Rs),Us=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return g(e,t),e}(Rs);function js(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function qs(t,e,n){var r=new Map;Fi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ys(s,a,n[i]))}return r}function Bs(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,gs(a,u,e))}return r}var Ks,Gs,Hs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return g(e,t),e}(Rs),zs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return g(e,t),e}(Rs),Ws=function(t){this.count=t};function Qs(t){switch(t){case ki.OK:return Mi();case ki.CANCELLED:case ki.UNKNOWN:case ki.DEADLINE_EXCEEDED:case ki.RESOURCE_EXHAUSTED:case ki.INTERNAL:case ki.UNAVAILABLE:case ki.UNAUTHENTICATED:return!1;case ki.INVALID_ARGUMENT:case ki.NOT_FOUND:case ki.ALREADY_EXISTS:case ki.PERMISSION_DENIED:case ki.FAILED_PRECONDITION:case ki.ABORTED:case ki.OUT_OF_RANGE:case ki.UNIMPLEMENTED:case ki.DATA_LOSS:return!0;default:return Mi()}}function Xs(t){if(void 0===t)return xi("GRPC error has no .code"),ki.UNKNOWN;switch(t){case Ks.OK:return ki.OK;case Ks.CANCELLED:return ki.CANCELLED;case Ks.UNKNOWN:return ki.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return ki.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return ki.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return ki.INTERNAL;case Ks.UNAVAILABLE:return ki.UNAVAILABLE;case Ks.UNAUTHENTICATED:return ki.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return ki.INVALID_ARGUMENT;case Ks.NOT_FOUND:return ki.NOT_FOUND;case Ks.ALREADY_EXISTS:return ki.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return ki.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return ki.FAILED_PRECONDITION;case Ks.ABORTED:return ki.ABORTED;case Ks.OUT_OF_RANGE:return ki.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return ki.UNIMPLEMENTED;case Ks.DATA_LOSS:return ki.DATA_LOSS;default:return Mi()}}(Gs=Ks||(Ks={}))[Gs.OK=0]="OK",Gs[Gs.CANCELLED=1]="CANCELLED",Gs[Gs.UNKNOWN=2]="UNKNOWN",Gs[Gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gs[Gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gs[Gs.NOT_FOUND=5]="NOT_FOUND",Gs[Gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gs[Gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gs[Gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gs[Gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gs[Gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gs[Gs.ABORTED=10]="ABORTED",Gs[Gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gs[Gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gs[Gs.INTERNAL=13]="INTERNAL",Gs[Gs.UNAVAILABLE=14]="UNAVAILABLE",Gs[Gs.DATA_LOSS=15]="DATA_LOSS";var Ys=function(){function t(t,e){this.comparator=t,this.root=e||Js.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Js.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new $s(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new $s(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new $s(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new $s(this.root,t,this.comparator,!0)},t}(),$s=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Js=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mi();if(this.right.isRed())throw Mi();var t=this.left.check();if(t!==this.right.check())throw Mi();return t+(this.isRed()?0:1)},t}();Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Js(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Zs=function(){function t(t){this.comparator=t,this.data=new Ys(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ta(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ta(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ta=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ea=new Ys(lo.comparator);function na(){return ea}var ra=new Ys(lo.comparator);function ia(){return ra}var oa=new Ys(lo.comparator);function sa(){return oa}var aa=new Zs(lo.comparator);function ua(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=aa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ca=new Zs(qi);function ha(){return ca}var la=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,fa.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Hi.min(),r,ha(),na(),ua())},t}(),fa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(to.EMPTY_BYTE_STRING,n,ua(),ua(),ua())},t}(),da=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},pa=function(t,e){this.targetId=t,this.V=e},va=function(t,e,n,r){void 0===n&&(n=to.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ma=function(){function t(){this.S=0,this.D=ba(),this.C=to.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=ua(),e=ua(),n=ua();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mi()}})),new fa(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=ba()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),ga=function(){function t(t){this.W=t,this.G=new Map,this.H=na(),this.J=ya(),this.Y=new Zs(qi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Mi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Lo(i))if(0===n){var o=new lo(i.path);this.tt(e,o,Do.newNoDocument(o,Hi.min()))}else Fi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Lo(o.target)){var s=new lo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Do.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=ua();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new la(t,n,this.Y,this.H,r);return this.H=na(),this.J=ya(),this.Y=new Zs(qi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new ma,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Zs(qi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Ri("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new ma),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ya(){return new Ys(lo.comparator)}function ba(){return new Ys(lo.comparator)}var wa={asc:"ASCENDING",desc:"DESCENDING"},Ia={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ta=function(t,e){this.databaseId=t,this.I=e};function Ea(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function _a(t,e){return t.I?e.toBase64():e.toUint8Array()}function Sa(t,e){return Ea(t,e.toTimestamp())}function Aa(t){return Fi(!!t),Hi.fromTimestamp(function(t){var e=no(t);return new Gi(e.seconds,e.nanos)}(t))}function Na(t,e){return function(t){return new Yi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function ka(t){var e=Yi.fromString(t);return Fi(Ja(e)),e}function Da(t,e){return Na(t.databaseId,e.path)}function Ca(t,e){var n=ka(e);if(n.get(1)!==t.databaseId.projectId)throw new Di(ki.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Di(ki.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lo(La(n))}function Oa(t,e){return Na(t.databaseId,e)}function Ra(t){var e=ka(t);return 4===e.length?Yi.emptyPath():La(e)}function xa(t){return new Yi(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function La(t){return Fi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Pa(t,e,n){return{name:Da(t,e),fields:n.value.mapValue.fields}}function Ma(t,e,n){var r=Ca(t,e.name),i=Aa(e.updateTime),o=new No({mapValue:{fields:e.fields}}),s=Do.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Fa(t,e){var n;if(e instanceof Vs)n={update:Pa(t,e.key,e.value)};else if(e instanceof Hs)n={delete:Da(t,e.key)};else if(e instanceof Us)n={update:Pa(t,e.key,e.data),updateMask:$a(e.fieldMask)};else{if(!(e instanceof zs))return Mi();n={verify:Da(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ws)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Es)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ss)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Mi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Sa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Mi()}(t,e.precondition)),n}function Va(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Cs.updateTime(Aa(t.updateTime)):void 0!==t.exists?Cs.exists(t.exists):Cs.none()}(e.currentDocument):Cs.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Fi("REQUEST_TIME"===e.setToServerValue),n=new ws;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Is(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Es(i)}else"increment"in e?n=new Ss(t,e.increment):Mi();var o=Ji.fromServerFormat(e.fieldPath);return new ks(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ca(t,e.update.name),o=new No({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Zi(e.map((function(t){return Ji.fromServerFormat(t)})))}(e.updateMask);return new Us(i,o,s,n,r)}return new Vs(i,o,n,r)}if(e.delete){var a=Ca(t,e.delete);return new Hs(a,n)}if(e.verify){var u=Ca(t,e.verify);return new zs(u,n)}return Mi()}function Ua(t,e){return{documents:[Oa(t,e.path)]}}function ja(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Oa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Oa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(_o(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_o(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(Eo(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:za(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Wa(t.field),direction:Ha(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||uo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ka(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ka(e.endAt)),n}function qa(t){var e=Ra(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ba(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new zo(Qa(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return uo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Ga(n.startAt));var h=null;return n.endAt&&(h=Ga(n.endAt)),$o(e,i,a,s,u,"F",c,h)}function Ba(t){return t?void 0!==t.unaryFilter?[Ya(t)]:void 0!==t.fieldFilter?[Xa(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ba(t)})).reduce((function(t,e){return t.concat(e)})):Mi():[]}function Ka(t){return{before:t.before,values:t.position}}function Ga(t){var e=!!t.before,n=t.values||[];return new Go(n,e)}function Ha(t){return wa[t]}function za(t){return Ia[t]}function Wa(t){return{fieldPath:t.canonicalString()}}function Qa(t){return Ji.fromServerFormat(t.fieldPath)}function Xa(t){return Po.create(Qa(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ya(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Qa(t.unaryFilter.field);return Po.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Qa(t.unaryFilter.field);return Po.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Qa(t.unaryFilter.field);return Po.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Qa(t.unaryFilter.field);return Po.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mi()}}function $a(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ja(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Za(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=eu(e)),e=tu(t.get(n),e);return eu(e)}function tu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eu(t){return t+""}function nu(t){var e=t.length;if(Fi(e>=2),2===e)return Fi(""===t.charAt(0)&&""===t.charAt(1)),Yi.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Mi(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Mi()}o=s+2}return new Yi(r)}var ru=function(t,e){this.seconds=t,this.nanoseconds=e},iu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};iu.store="owner",iu.key="owner";var ou=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ou.store="mutationQueues",ou.keyPath="userId";var su=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};su.store="mutations",su.keyPath="batchId",su.userMutationsIndex="userMutationsIndex",su.userMutationsKeyPath=["userId","batchId"];var au=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Za(e)]},t.key=function(t,e,n){return[t,Za(e),n]},t}();au.store="documentMutations",au.PLACEHOLDER=new au;var uu=function(t,e){this.path=t,this.readTime=e},cu=function(t,e){this.path=t,this.version=e},hu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};hu.store="remoteDocuments",hu.readTimeIndex="readTimeIndex",hu.readTimeIndexPath="readTime",hu.collectionReadTimeIndex="collectionReadTimeIndex",hu.collectionReadTimeIndexPath=["parentPath","readTime"];var lu=function(t){this.byteSize=t};lu.store="remoteDocumentGlobal",lu.key="remoteDocumentGlobalKey";var fu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};fu.store="targets",fu.keyPath="targetId",fu.queryTargetsIndexName="queryTargetsIndex",fu.queryTargetsKeyPath=["canonicalId","targetId"];var du=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};du.store="targetDocuments",du.keyPath=["targetId","path"],du.documentTargetsIndex="documentTargetsIndex",du.documentTargetsKeyPath=["path","targetId"];var pu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};pu.key="targetGlobalKey",pu.store="targetGlobal";var vu=function(t,e){this.collectionId=t,this.parent=e};vu.store="collectionParents",vu.keyPath=["collectionId","parent"];var mu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};mu.store="clientMetadata",mu.keyPath="clientId";var gu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gu.store="bundles",gu.keyPath="bundleId";var yu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};yu.store="namedQueries",yu.keyPath="name";var bu=E(E([],E(E([],E(E([],E(E([],[ou.store,su.store,au.store,hu.store,fu.store,iu.store,pu.store,du.store]),[mu.store])),[lu.store])),[vu.store])),[gu.store,yu.store]),wu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Iu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Tu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Eu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Mi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),_u=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Tu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Nu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Ru(e.target.error);n.ft.reject(new Nu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Nu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Ri("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Du(e)},t}(),Su=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(N())&&xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Ri("SimpleDb","Removing database:",t),Cu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=N(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return b(this,void 0,void 0,(function(){var e,n=this;return w(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ri("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Di(ki.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Nu(t,n))},i.onupgradeneeded=function(t){Ri("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Ri("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o,s,a,u;return w(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return w(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=_u.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Eu.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,Ri("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Au=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Cu(this.Pt.delete())},t}(),Nu=function(t){function e(e,n){var r=this;return(r=t.call(this,ki.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return g(e,t),e}(Di);function ku(t){return"IndexedDbTransactionError"===t.name}var Du=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ri("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ri("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Cu(n)},t.prototype.add=function(t){return Ri("SimpleDb","ADD",this.store.name,t,t),Cu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Cu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ri("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ri("SimpleDb","DELETE",this.store.name,t),Cu(this.store.delete(t))},t.prototype.count=function(){return Ri("SimpleDb","COUNT",this.store.name),Cu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Ri("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Eu((function(n,r){e.onerror=function(t){var e=Ru(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Eu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Au(i),s=e(i.primaryKey,i.value,o);if(s instanceof Eu){var a=s.catch((function(t){return o.done(),Eu.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Eu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Cu(t){return new Eu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ru(t.target.error);n(e)}}))}var Ou=!1;function Ru(t){var e=Su._t(N());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Di("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ou||(Ou=!0,setTimeout((function(){throw r}),0)),r}}return t}var xu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return g(e,t),e}(Iu);function Lu(t,e){var n=Vi(t);return Su.It(n.Mt,e)}var Pu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&xs(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ls(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ls(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hi.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ua())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Bi(this.mutations,t.mutations,(function(t,e){return Ms(t,e)}))&&Bi(this.baseMutations,t.baseMutations,(function(t,e){return Ms(t,e)}))},t}(),Mu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Fi(e.mutations.length===r.length);for(var i=sa(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Fu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Hi.min()),void 0===o&&(o=Hi.min()),void 0===s&&(s=to.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Vu=function(t){this.Lt=t};function Uu(t,e){if(e.document)return Ma(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lo.fromSegments(e.noDocument.path),r=Gu(e.noDocument.readTime),i=Do.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=lo.fromSegments(e.unknownDocument.path);return r=Gu(e.unknownDocument.version),Do.newUnknownDocument(o,r)}return Mi()}function ju(t,e,n){var r=qu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Da(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ea(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new hu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ku(e.version);return s=e.hasCommittedMutations,new hu(null,new uu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Ku(e.version);return new hu(new cu(c,h),null,null,!0,r,i)}return Mi()}function qu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Bu(t){var e=new Gi(t[0],t[1]);return Hi.fromTimestamp(e)}function Ku(t){var e=t.toTimestamp();return new ru(e.seconds,e.nanoseconds)}function Gu(t){var e=new Gi(t.seconds,t.nanoseconds);return Hi.fromTimestamp(e)}function Hu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Va(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Va(t.Lt,e)})),a=Gi.fromMillis(e.localWriteTimeMs);return new Pu(e.batchId,a,n,s)}function zu(t){var e,n,r=Gu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Gu(t.lastLimboFreeSnapshotVersion):Hi.min();return void 0!==t.query.documents?(Fi(1===(n=t.query).documents.length),e=os(Jo(Ra(n.documents[0])))):e=function(t){return os(qa(t))}(t.query),new Fu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,to.fromBase64String(t.resumeToken))}function Wu(t,e){var n,r=Ku(e.snapshotVersion),i=Ku(e.lastLimboFreeSnapshotVersion);n=Lo(e.target)?Ua(t.Lt,e.target):ja(t.Lt,e.target);var o=e.resumeToken.toBase64();return new fu(e.targetId,Ro(e.target),r,o,e.sequenceNumber,i,n)}function Qu(t){var e=qa({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ss(e,e.limit,"L"):e}var Xu=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Yu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Gu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Yu(t).put({bundleId:(n=e).id,createTime:Ku(Aa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return $u(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Qu(e.bundledQuery),readTime:Gu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return $u(t).put(function(t){return{name:t.name,readTime:Ku(Aa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Yu(t){return Lu(t,gu.store)}function $u(t){return Lu(t,yu.store)}var Ju=function(){function t(){this.Bt=new Zu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Eu.resolve()},t.prototype.getCollectionParents=function(t,e){return Eu.resolve(this.Bt.getEntries(e))},t}(),Zu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Zs(Yi.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Zs(Yi.comparator)).toArray()},t}(),tc=function(){function t(){this.qt=new Zu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Za(i)};return ec(t).put(o)}return Eu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ki(e),""],!1,!0);return ec(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(nu(o.parent))}return n}))},t}();function ec(t){return Lu(t,vu.store)}var nc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function ic(t,e,n){var r=t.store(su.store),i=t.store(au.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Fi(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=au.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Eu.waitFor(o).next((function(){return c}))}function oc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mi();e=t.noDocument}return JSON.stringify(e).length}rc.DEFAULT_COLLECTION_PERCENTILE=10,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rc.DEFAULT=new rc(41943040,rc.DEFAULT_COLLECTION_PERCENTILE,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rc.DISABLED=new rc(-1,0,0);var sc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Fi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return uc(t).$t({index:su.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=cc(t),s=uc(t);return s.add({}).next((function(a){Fi("number"==typeof a);for(var u=new Pu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Fa(t.Lt,e)})),i=n.mutations.map((function(e){return Fa(t.Lt,e)}));return new su(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Zs((function(t,e){return qi(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=au.key(i.userId,p.key.path,a);l=l.add(p.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,au.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Eu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return uc(t).get(e).next((function(t){return t?(Fi(t.userId===n.userId),Hu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Eu.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return uc(t).$t({index:su.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Fi(e.batchId>=r),o=Hu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return uc(t).$t({index:su.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return uc(t).Nt(su.userMutationsIndex,n).next((function(t){return t.map((function(t){return Hu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=au.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return cc(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=nu(u);if(a===n.userId&&e.path.isEqual(h))return uc(t).get(c).next((function(t){if(!t)throw Mi();Fi(t.userId===n.userId),o.push(Hu(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zs(qi),i=[];return e.forEach((function(e){var o=au.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=cc(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=nu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Eu.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=au.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Zs(qi);return cc(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=nu(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(uc(t).get(e).next((function(t){if(null===t)throw Mi();Fi(t.userId===n.userId),r.push(Hu(n.R,t))})))})),Eu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return ic(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Eu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Eu.resolve();var r=IDBKeyRange.lowerBound(au.prefixForUser(e.userId)),i=[];return cc(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=nu(t[1]);i.push(o)}else r.done()})).next((function(){Fi(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return ac(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return hc(t).get(this.userId).next((function(t){return t||new ou(e.userId,-1,"")}))},t}();function ac(t,e,n){var r=au.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return cc(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function uc(t){return Lu(t,su.store)}function cc(t){return Lu(t,au.store)}function hc(t){return Lu(t,ou.store)}var lc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),fc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new lc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Hi.fromTimestamp(new Gi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return dc(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Fi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return dc(t).$t((function(s,a){var u=zu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Eu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return dc(t).$t((function(t,n){var r=zu(n);e(r)}))},t.prototype.Xt=function(t){return pc(t).get(pu.key).next((function(t){return Fi(null!==t),t}))},t.prototype.Zt=function(t,e){return pc(t).put(pu.key,e)},t.prototype.te=function(t,e){return dc(t).put(Wu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ro(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return dc(t).$t({range:r,index:fu.queryTargetsIndexName},(function(t,n,r){var o=zu(n);xo(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=vc(t);return e.forEach((function(e){var s=Za(e.path);i.push(o.put(new du(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Eu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=vc(t);return Eu.forEach(e,(function(e){var o=Za(e.path);return Eu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=vc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=vc(t),i=ua();return r.$t({range:n,kt:!0},(function(t,e,n){var r=nu(t[1]),o=new lo(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Za(e.path),r=IDBKeyRange.bound([n],[Ki(n)],!1,!0),i=0;return vc(t).$t({index:du.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return dc(t).get(e).next((function(t){return t?zu(t):null}))},t}();function dc(t){return Lu(t,fu.store)}function pc(t){return Lu(t,pu.store)}function vc(t){return Lu(t,du.store)}function mc(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){if(t.code!==ki.FAILED_PRECONDITION||t.message!==wu)throw t;return Ri("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function gc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=qi(n,i);return 0===s?qi(r,o):s}var yc=function(){function t(t){this.ne=t,this.buffer=new Zs(gc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),bc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Ri("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return b(e,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ku(e=n.sent())?(Ri("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,mc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),wc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Eu.resolve(Ni.o);var r=new yc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ri("LruGarbageCollector","Garbage collection skipped; disabled"),Eu.resolve(nc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ri("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),nc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Ri("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Oi()<=G.DEBUG&&Ri("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Eu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Ic=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new wc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Tc(t,n)},t.prototype.removeReference=function(t,e,n){return Tc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Tc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return hc(t).Ot((function(r){return ac(t,r,e).next((function(t){return t&&(n=!0),Eu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),vc(t).delete([0,Za(s.path)])}))}));i.push(u)}})).next((function(){return Eu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Tc(t,e)},t.prototype.we=function(t,e){var n,r=vc(t),i=Ni.o;return r.$t({index:du.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Ni.o&&e(new lo(nu(n)),i),i=a,n=s):i=Ni.o})).next((function(){i!==Ni.o&&e(new lo(nu(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Tc(t,e){return vc(t).put(function(t,e){return new du(0,Za(t.path),e)}(e,t.currentSequenceNumber))}var Ec=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Wi(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Qi(this.inner)},t}(),_c=function(){function t(){this.changes=new Ec((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Hi.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Do.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Eu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Sc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return kc(t).put(Dc(e),n)},t.prototype.removeEntry=function(t,e){var n=kc(t),r=Dc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return kc(t).get(Dc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return kc(t).get(Dc(e)).next((function(t){return{document:n.ye(e,t),size:oc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=na();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=na(),i=new Ys(lo.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,oc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Eu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return kc(t).$t({range:r},(function(t,e,r){for(var s=lo.fromSegments(t);o&&lo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=na(),o=e.path.length+1,s={};if(n.isEqual(Hi.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=qu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=hu.collectionReadTimeIndex}return kc(t).$t(s,(function(t,n,s){if(t.length===o){var a=Uu(r.R,n);e.path.isPrefixOf(a.key.path)?hs(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Ac(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Nc(t).get(lu.key).next((function(t){return Fi(!!t),t}))},t.prototype.me=function(t,e){return Nc(t).put(lu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Uu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Hi.min()))return n}return Do.newInvalidDocument(t)},t}(),Ac=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Ec((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return g(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Zs((function(t,e){return qi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=ju(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=oc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=ju(e.Ie.R,Do.newNoDocument(o,Hi.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Eu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(_c);function Nc(t){return Lu(t,lu.store)}function kc(t){return Lu(t,hu.store)}function Dc(t){return t.path.toArray()}var Cc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Fi(n<r&&n>=0&&r<=11);var o=new _u("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(iu.store)}(t),function(t){t.createObjectStore(ou.store,{keyPath:ou.keyPath}),t.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0}),t.createObjectStore(au.store)}(t),Oc(t),function(t){t.createObjectStore(hu.store)}(t));var s=Eu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(du.store),t.deleteObjectStore(fu.store),t.deleteObjectStore(pu.store)}(t),Oc(t)),s=s.next((function(){return function(t){var e=t.store(pu.store),n=new pu(0,0,Hi.min().toTimestamp(),0);return e.put(pu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(su.store).Nt().next((function(n){t.deleteObjectStore(su.store),t.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0});var r=e.store(su.store),i=n.map((function(t){return r.put(t)}));return Eu.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(lu.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(hu.store);e.createIndex(hu.readTimeIndex,hu.readTimeIndexPath,{unique:!1}),e.createIndex(hu.collectionReadTimeIndex,hu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(gu.store,{keyPath:gu.keyPath})}(t),function(t){t.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(hu.store).$t((function(t,n){e+=oc(n)})).next((function(){var n=new lu(e);return t.store(lu.store).put(lu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ou.store),r=t.store(su.store);return n.Nt().next((function(n){return Eu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(su.userMutationsIndex,i).next((function(r){return Eu.forEach(r,(function(r){Fi(r.userId===n.userId);var i=Hu(e.R,r);return ic(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(du.store),n=t.store(hu.store);return t.store(pu.store).get(pu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Yi(n),s=function(t){return[0,Za(t)]}(o);r.push(e.get(s).next((function(n){return n?Eu.resolve():function(n){return e.put(new du(0,Za(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Eu.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(vu.store,{keyPath:vu.keyPath});var n=e.store(vu.store),r=new Zu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Za(i)})}};return e.store(hu.store).$t({kt:!0},(function(t,e){var n=new Yi(t);return i(n.popLast())})).next((function(){return e.store(au.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=nu(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(fu.store);return n.$t((function(t,r){var i=zu(r),o=Wu(e.R,i);return n.put(o)}))},t}();function Oc(t){t.createObjectStore(du.store,{keyPath:du.keyPath}).createIndex(du.documentTargetsIndex,du.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(fu.store,{keyPath:fu.keyPath}).createIndex(fu.queryTargetsIndexName,fu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(pu.store)}var Rc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Di(ki.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ic(this,i),this.Le=n+"main",this.R=new Vu(u),this.Be=new Su(this.Le,11,new Cc(this.R)),this.qe=new fc(this.referenceDelegate,this.R),this.Ut=new tc,this.Ue=function(t,e){return new Sc(t,e)}(this.R,this.Ut),this.Ke=new Xu,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Di(ki.FAILED_PRECONDITION,Rc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Ni(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return b(e,void 0,void 0,(function(){return w(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return b(e,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return b(e,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Pc(e).put(new mu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ku(e))return Ri("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ri("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Lc(t).get(iu.key).next((function(t){return Eu.resolve(e.tn(t))}))},t.prototype.en=function(t){return Pc(t).delete(this.clientId)},t.prototype.nn=function(){return b(this,void 0,void 0,(function(){var t,e,n,r,i=this;return w(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Lu(t,mu.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Eu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Eu.resolve(!0):Lc(t).get(iu.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Di(ki.FAILED_PRECONDITION,Rc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Pc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ri("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return b(this,void 0,void 0,(function(){var t=this;return w(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[iu.store,mu.store],(function(e){var n=new xu(e,Ni.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Pc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return sc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ri("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,bu,(function(o){return i=new xu(o,r.Ne?r.Ne.next():Ni.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw xi("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Di(ki.FAILED_PRECONDITION,wu);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Lc(t).get(iu.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Di(ki.FAILED_PRECONDITION,Rc)}))},t.prototype.Ze=function(t){var e=new iu(this.clientId,this.allowTabSynchronization,Date.now());return Lc(t).put(iu.key,e)},t.yt=function(){return Su.yt()},t.prototype.Xe=function(t){var e=this,n=Lc(t);return n.get(iu.key).next((function(t){return e.tn(t)?(Ri("IndexedDbPersistence","Releasing primary lease."),n.delete(iu.key)):Eu.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(xi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Ri("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return xi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){xi("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Lc(t){return Lu(t,iu.store)}function Pc(t){return Lu(t,mu.store)}function Mc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Fc=function(t,e){this.progress=t,this.wn=e},Vc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return lo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):rs(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new lo(e)).next((function(t){var e=ia();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ia();return this.Ut.getCollectionParents(t,i).next((function(s){return Eu.forEach(s,(function(s){var a=function(t,e){return new Yo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=Do.newInvalidDocument(c),r=r.insert(c,h)),Ls(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){hs(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=ua(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Us&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Uc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=ua(),i=ua(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),jc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Hi.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(Zo(e)||ts(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Oi()<=G.DEBUG&&Ri("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),cs(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Zs(ls(t));return e.forEach((function(e,r){hs(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Oi()<=G.DEBUG&&Ri("QueryEngine","Using full collection scan to execute query:",cs(e)),this.Sn.getDocumentsMatchingQuery(t,e,Hi.min())},t}(),qc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ys(qi),this.kn=new Ec((function(t){return Ro(t)}),xo),this.$n=Hi.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Bc(t,e,n,r){return new qc(t,e,n,r)}function Kc(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o;return w(this,(function(s){switch(s.label){case 0:return n=Vi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Vc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=ua(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Gc(t,e){var n=Vi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Eu.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Fi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Hc(t){var e=Vi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function zc(t,e){var n=Vi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Fi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=na();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Wc(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Hi.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Eu.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Wc(t,e,n,r,i){var o=ua();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=na();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Hi.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Ri("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Qc(t,e){var n=Vi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Xc(t,e){var n=Vi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Eu.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Fu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Yc(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s;return w(this,(function(a){switch(a.label){case 0:r=Vi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ku(s=a.sent()))throw s;return Ri("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function $c(t,e,n){var r=Vi(t),i=Hi.min(),o=ua();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Vi(t),i=r.kn.get(n);return void 0!==i?Eu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,os(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Hi.min(),n?o:ua())})).next((function(t){return{documents:t,Bn:o}}))}))}function Jc(t,e){var n=Vi(t),r=Vi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Zc(t){var e=Vi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Vi(t),i=na(),o=qu(n),s=kc(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:hu.readTimeIndex,range:a},(function(t,e){var n=Uu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Bu(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function th(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){return[2,(e=Vi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=kc(t),n=Hi.min();return e.$t({index:hu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Bu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function eh(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,d;return w(this,(function(p){switch(p.label){case 0:for(i=Vi(t),o=ua(),s=na(),a=sa(),u=0,c=n;u<c.length;u++)h=c[u],l=e.qn(h.metadata.name),h.document&&(o=o.add(l)),s=s.insert(l,e.Un(h)),a=a.insert(l,e.Kn(h.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Xc(i,function(t){return os(Jo(Yi.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Wc(t,f,s,Hi.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function nh(t,e,n){return void 0===n&&(n=ua()),b(this,void 0,void 0,(function(){var r,i;return w(this,(function(o){switch(o.label){case 0:return[4,Xc(t,os(Qu(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Vi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Aa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(to.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var rh=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Eu.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Aa(n.createTime)}),Eu.resolve()},t.prototype.getNamedQuery=function(t,e){return Eu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Qu(t.bundledQuery),readTime:Aa(t.readTime)}}(e)),Eu.resolve()},t}(),ih=function(){function t(){this.Wn=new Zs(oh.Gn),this.zn=new Zs(oh.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new oh(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new oh(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new lo(new Yi([])),r=new oh(n,t),i=new oh(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new lo(new Yi([])),n=new oh(e,t),r=new oh(e,t+1),i=ua();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new oh(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),oh=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return lo.comparator(t.key,e.key)||qi(t.ns,e.ns)},t.Hn=function(t,e){return qi(t.ns,e.ns)||lo.comparator(t.key,e.key)},t}(),sh=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Zs(oh.Gn)}return t.prototype.checkEmpty=function(t){return Eu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Pu(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new oh(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Eu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Eu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Eu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Eu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Eu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new oh(e,0),i=new oh(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Eu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Zs(qi);return e.forEach((function(t){var e=new oh(t,0),i=new oh(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Eu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;lo.isDocumentKey(i)||(i=i.child(""));var o=new oh(new lo(i),0),s=new Zs(qi);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Eu.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Fi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Eu.forEach(e.mutations,(function(i){var o=new oh(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new oh(e,0),r=this.rs.firstAfterOrEqual(n);return Eu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Eu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ah=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ys(lo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Eu.resolve(n?n.document.clone():Do.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=na();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Do.newInvalidDocument(t))})),Eu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=na(),i=new lo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||hs(e,c)&&(r=r.insert(c.key,c.clone()))}return Eu.resolve(r)},t.prototype.fs=function(t,e){return Eu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new uh(this)},t.prototype.getSize=function(t){return Eu.resolve(this.size)},t}(),uh=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return g(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Eu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(_c),ch=function(){function t(t){this.persistence=t,this.ds=new Ec((function(t){return Ro(t)}),xo),this.lastRemoteSnapshotVersion=Hi.min(),this.highestTargetId=0,this.ws=0,this._s=new ih,this.targetCount=0,this.ys=lc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Eu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Eu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Eu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Eu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Eu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new lc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Eu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Eu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Eu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Eu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Eu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Eu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Eu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Eu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Eu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Eu.resolve(n)},t.prototype.containsKey=function(t,e){return Eu.resolve(this._s.containsKey(e))},t}(),hh=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ni(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ch(this),this.Ut=new Ju,this.Ue=function(t,e){return new ah(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Vu(e),this.Ke=new rh(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new sh(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Ri("MemoryPersistence","Starting transaction:",t);var i=new lh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Eu.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return g(e,t),e}(Iu),fh=function(){function t(t){this.persistence=t,this.As=new ih,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Eu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Eu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Eu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Eu.forEach(this.vs,(function(r){var i=lo.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Eu.or([function(){return Eu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),dh=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ph(t,e){return"firestore_clients_"+t+"_"+e}function vh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function mh(t,e){return"firestore_targets_"+t+"_"+e}dh.UNAUTHENTICATED=new dh(null),dh.GOOGLE_CREDENTIALS=new dh("google-credentials-uid"),dh.FIRST_PARTY=new dh("first-party-uid");var gh=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Di(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(xi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Di(i.error.code,i.error.message)),o?new t(e,i.state,r):(xi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),bh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ha(),s=0;i&&s<r.activeTargetIds.length;++s)i=ho(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(xi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),wh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(xi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ih=function(){function t(){this.activeTargetIds=ha()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Th=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ys(qi),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ph(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ih),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return b(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return w(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ph(this.persistenceKey,r)))&&(o=bh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(mh(this.persistenceKey,t));if(n){var r=yh.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(mh(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ri("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ri("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ri("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ri("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return b(e,void 0,void 0,(function(){var t,e,r,i,o,s;return w(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ni.o;if(null!=t)try{var n=JSON.parse(t);Fi("number"==typeof n),e=n}catch(t){xi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ni.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gh(this.currentUser,t,e,n),i=vh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=vh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=mh(this.persistenceKey,t),i=new yh(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return bh.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gh.Vs(new dh(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return yh.Vs(r,e)},t.prototype.js=function(t){return wh.Vs(t)},t.prototype.ii=function(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Ri("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ha();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Eh=function(){function t(){this.li=new Ih,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ih,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),_h=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Sh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Ri("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Ri("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ah={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Nh=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),kh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return g(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Ai;s.listenOnce(wi.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case bi.NO_ERROR:var e=s.getResponseJson();Ri("Connection","XHR received:",JSON.stringify(e)),i(e);break;case bi.TIMEOUT:Ri("Connection",'RPC "'+t+'" timed out'),o(new Di(ki.DEADLINE_EXCEEDED,"Request time out"));break;case bi.HTTP_ERROR:var n=s.getStatus();if(Ri("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ki).indexOf(e)>=0?e:ki.UNKNOWN}(r.status);o(new Di(a,r.message))}else o(new Di(ki.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Di(ki.UNAVAILABLE,"Connection failed."));break;default:Mi()}}finally{Ri("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new pi,o=an(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new _i({})),this.Fi(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())||"object"==typeof navigator&&"ReactNative"===navigator.product||N().indexOf("Electron/")>=0||function(){var t=N();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||N().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");Ri("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,l=new Nh({Ei:function(t){h?Ri("Connection","Not sending because WebChannel is closed:",t):(c||(Ri("Connection","Opening WebChannel transport."),u.open(),c=!0),Ri("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Si.EventType.OPEN,(function(){h||Ri("Connection","WebChannel transport opened.")})),f(u,Si.EventType.CLOSE,(function(){h||(h=!0,Ri("Connection","WebChannel transport closed"),l.Vi())})),f(u,Si.EventType.ERROR,(function(t){h||(h=!0,Li("Connection","WebChannel transport errored:",t),l.Vi(new Di(ki.UNAVAILABLE,"The operation could not be completed")))})),f(u,Si.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Fi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ri("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ks[t];if(void 0!==e)return Xs(e)}(o),a=i.message;void 0===s&&(s=ki.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new Di(s,a)),u.close()}else Ri("Connection","WebChannel received:",n),l.Si(n)}})),f(o,Ii.STAT_EVENT,(function(t){t.stat===Ti?Ri("Connection","Detected buffering proxy"):t.stat===Ei&&Ri("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Ri("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Ri("RestConnection","Received: ",t),t}),(function(e){throw Li("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ah[t];return this.Di+"/v1/"+e+":"+n},t}());function Dh(){return"undefined"!=typeof window?window:null}function Ch(){return"undefined"!=typeof document?document:null}function Oh(t){return new Ta(t,!0)}var Rh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Ri("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),xh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return b(this,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ki.RESOURCE_EXHAUSTED?(xi(e.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ki.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Di(ki.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return b(t,void 0,void 0,(function(){return w(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Ri("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Ri("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Lh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return g(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Mi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Fi(void 0===e||"string"==typeof e),to.fromBase64String(e||"")):(Fi(void 0===e||e instanceof Uint8Array),to.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ki.UNKNOWN:Xs(t.code);return new Di(e,t.message||"")}(a);n=new va(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ca(t,r.document.name),o=Aa(r.document.updateTime);var a=new No({mapValue:{fields:r.document.fields}}),u=(s=Do.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new da(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ca(t,r.document),o=r.readTime?Aa(r.readTime):Hi.min(),a=Do.newNoDocument(i,o),s=r.removedTargetIds||[],n=new da([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ca(t,r.document),o=r.removedTargetIds||[],n=new da([],o,i,null);else{if(!("filter"in e))return Mi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Ws(r),o=h.targetId,n=new pa(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Hi.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Hi.min():e.readTime?Aa(e.readTime):Hi.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=xa(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Lo(r)?{documents:Ua(t,r)}:{query:ja(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=_a(t,e.resumeToken):e.snapshotVersion.compareTo(Hi.min())>0&&(n.readTime=Ea(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=xa(this.R),e.removeTarget=t,this.cr(e)},e}(xh),Ph=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return g(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Fi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Fi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Aa(t.updateTime):Aa(e);return n.isEqual(Hi.min())&&(n=Aa(e)),new Ds(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Aa(t.commitTime);return this.listener.Tr(n,e)}return Fi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=xa(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Fa(e.R,t)}))};this.cr(n)},e}(xh),Mh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return g(e,t),e.prototype.br=function(){if(this.Rr)throw new Di(ki.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ki.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Di(ki.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ki.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Di(ki.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Fh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(xi(e),this.Vr=!1):Ri("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Vh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return b(o,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return Wh(this)?(Ri("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return(e=Vi(t)).Or.add(4),[4,jh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Uh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Fh(n,r)};function Uh(t){return b(this,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:if(!Wh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jh(t){return b(this,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qh(t,e){var n=Vi(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),zh(n)?Hh(n):ul(n).er()&&Kh(n,e))}function Bh(t,e){var n=Vi(t),r=ul(n);n.$r.delete(e),r.er()&&Gh(n,e),0===n.$r.size&&(r.er()?r.ir():Wh(n)&&n.Br.set("Unknown"))}function Kh(t,e){t.qr.U(e.targetId),ul(t).mr(e)}function Gh(t,e){t.qr.U(e),ul(t).yr(e)}function Hh(t){t.qr=new ga({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ul(t).start(),t.Br.Sr()}function zh(t){return Wh(t)&&!ul(t).tr()&&t.$r.size>0}function Wh(t){return 0===Vi(t).Or.size}function Qh(t){t.qr=void 0}function Xh(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){return t.$r.forEach((function(e,n){Kh(t,e)})),[2]}))}))}function Yh(t,e){return b(this,void 0,void 0,(function(){return w(this,(function(n){return Qh(t),zh(t)?(t.Br.Nr(e),Hh(t)):t.Br.set("Unknown"),[2]}))}))}function $h(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o;return w(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof va&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o;return w(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Ri("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Jh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof da?t.qr.X(e):e instanceof pa?t.qr.rt(e):t.qr.et(e),n.isEqual(Hi.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Hc(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(to.EMPTY_BYTE_STRING,n.snapshotVersion)),Gh(t,e);var r=new Fu(n.target,e,1,n.sequenceNumber);Kh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Ri("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Jh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Jh(t,e,n){return b(this,void 0,void 0,(function(){var r=this;return w(this,(function(i){switch(i.label){case 0:if(!ku(e))throw e;return t.Or.add(1),[4,jh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Hc(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return b(r,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return Ri("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Uh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Zh(t,e){return e().catch((function(n){return Jh(t,n,e)}))}function tl(t){return b(this,void 0,void 0,(function(){var e,n,r,i,o;return w(this,(function(s){switch(s.label){case 0:e=Vi(t),n=cl(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Wh(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Qc(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=cl(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Jh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return el(e)&&nl(e),[2]}}))}))}function el(t){return Wh(t)&&!cl(t).tr()&&t.kr.length>0}function nl(t){cl(t).start()}function rl(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){return cl(t).Ar(),[2]}))}))}function il(t){return b(this,void 0,void 0,(function(){var e,n,r,i;return w(this,(function(o){for(e=cl(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function ol(t,e,n){return b(this,void 0,void 0,(function(){var r,i;return w(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Mu.from(r,e,n),[4,Zh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,tl(t)];case 2:return o.sent(),[2]}}))}))}function sl(t,e){return b(this,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return e&&cl(t).pr?[4,function(t,e){return b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:return Qs(r=e.code)&&r!==ki.ABORTED?(n=t.kr.shift(),cl(t).sr(),[4,Zh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,tl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return el(t)&&nl(t),[2]}}))}))}function al(t,e){return b(this,void 0,void 0,(function(){var n;return w(this,(function(r){switch(r.label){case 0:return n=Vi(t),e?(n.Or.delete(2),[4,Uh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,jh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function ul(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Vi(t);return r.br(),new Lh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Xh.bind(null,t),Ri:Yh.bind(null,t),_r:$h.bind(null,t)}),t.Mr.push((function(n){return b(e,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zh(t)?Hh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Qh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function cl(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Vi(t);return r.br(),new Ph(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:rl.bind(null,t),Ri:sl.bind(null,t),Ir:il.bind(null,t),Tr:ol.bind(null,t)}),t.Mr.push((function(n){return b(e,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,tl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(Ri("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var hl=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Tu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Di(ki.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ll(t,e){if(xi("AsyncQueue",e+": "+t),ku(t))return new Di(ki.UNAVAILABLE,e+": "+t);throw t}var fl=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lo.comparator(e.key,n.key)}:function(t,e){return lo.comparator(t.key,e.key)},this.keyedMap=ia(),this.sortedSet=new Ys(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),dl=function(){function t(){this.Qr=new Ys(lo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Mi():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),pl=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,fl.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&as(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),vl=function(){this.Wr=void 0,this.listeners=[]},ml=function(){this.queries=new Ec((function(t){return us(t)}),as),this.onlineState="Unknown",this.Gr=new Set};function gl(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return w(this,(function(c){switch(c.label){case 0:if(n=Vi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new vl),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=ll(a,"Initialization of query '"+cs(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Il(n),[2]}}))}))}function yl(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s;return w(this,(function(a){return n=Vi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function bl(t,e){for(var n=Vi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Il(n)}function wl(t,e,n){var r=Vi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Il(t){t.Gr.forEach((function(t){t.next()}))}var Tl=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new pl(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=pl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),El=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),_l=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ca(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ma(this.R,t.document,!1):Do.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Aa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new _l(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||ua()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return b(this,void 0,void 0,(function(){var t,e,n,r,i;return w(this,(function(o){switch(o.label){case 0:return[4,eh(this.localStore,new _l(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,nh(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Fc(Object.assign({},this.progress),t))]}}))}))}}();var Sl=function(t){this.key=t},Al=function(t){this.key=t},Nl=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=ua(),this.mutatedKeys=ua(),this.lo=ls(t),this.fo=new fl(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new dl,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Zo(this.query)&&i.size===this.query.limit?i.last():null,c=ts(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=hs(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(a=!0)),p&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Zo(this.query)||ts(this.query))for(;s.size>this.query.limit;){var h=Zo(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new pl(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new dl,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=ua(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Al(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Sl(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=ua();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return pl.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),kl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Dl=function(t){this.key=t,this.bo=!1},Cl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Ec((function(t){return us(t)}),as),this.Vo=new Map,this.So=new Set,this.Do=new Ys(lo.comparator),this.Co=new Map,this.No=new ih,this.xo={},this.Fo=new Map,this.ko=lc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Ol(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a;return w(this,(function(u){switch(u.label){case 0:return n=af(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Xc(n.localStore,os(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Rl(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&qh(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Rl(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o,s,a,u,c;return w(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o,s;return w(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,$c(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Hl(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,$c(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Nl(e,i.Bn),s=o._o(i.documents),a=fa.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Hl(t,n,u.To),c=new kl(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function xl(t,e){return b(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){switch(o.label){case 0:return n=Vi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!as(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Yc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Bh(n.remoteStore,r.targetId),Kl(n,r.targetId)})).catch(mc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Kl(n,r.targetId),[4,Yc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ll(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s;return w(this,(function(a){switch(a.label){case 0:r=uf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Vi(t),i=Gi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ua());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Ps(c,n.get(c.key));null!=h&&s.push(new Us(c.key,h,ko(h.value.mapValue),Cs.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ys(qi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ql(r,i.changes)];case 3:return a.sent(),[4,tl(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ll(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Pl(t,e){return b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:n=Vi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Fi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Fi(r.bo):t.removedDocuments.size>0&&(Fi(r.bo),r.bo=!1))})),[4,Ql(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,mc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ml(t,e,n){var r=Vi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Vi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Il(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Fl(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s,a,u;return w(this,(function(c){switch(c.label){case 0:return(r=Vi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ys(lo.comparator)).insert(o,Do.newNoDocument(o,Hi.min())),a=ua().add(o),u=new la(Hi.min(),new Map,new Zs(qi),s,a),[4,Pl(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Wl(r),[3,4];case 2:return[4,Yc(r.localStore,e,!1).then((function(){return Kl(r,e,n)})).catch(mc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Vl(t,e){return b(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){switch(o.label){case 0:n=Vi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Gc(n.localStore,e)];case 2:return i=o.sent(),Bl(n,r,null),ql(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ql(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,mc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ul(t,e,n){return b(this,void 0,void 0,(function(){var r,i;return w(this,(function(o){switch(o.label){case 0:r=Vi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Vi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Fi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),Bl(r,e,n),ql(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ql(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,mc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function jl(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s;return w(this,(function(a){switch(a.label){case 0:Wh((n=Vi(t)).remoteStore)||Ri("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Vi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=ll(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function ql(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Bl(t,e,n){var r=Vi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Kl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Gl(t,e)}))}function Gl(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Bh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Wl(t))}function Hl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Sl?(t.No.addReference(o.key,e),zl(t,o)):o instanceof Al?(Ri("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Gl(t,o.key)):Mi()}}function zl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Ri("SyncEngine","New document in limbo: "+n),t.So.add(r),Wl(t))}function Wl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new lo(Yi.fromString(e)),r=t.ko.next();t.Co.set(r,new Dl(n)),t.Do=t.Do.insert(n,r),qh(t.remoteStore,new Fu(os(Jo(n.path)),r,2,Ni.o))}}function Ql(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s;return w(this,(function(a){switch(a.label){case 0:return r=Vi(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Uc.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:n=Vi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Eu.forEach(e,(function(e){return Eu.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Eu.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!ku(r=l.sent()))throw r;return Ri("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,h));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Xl(t,e){return b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:return(n=Vi(t)).currentUser.isEqual(e)?[3,3]:(Ri("SyncEngine","User change. New user:",e.toKey()),[4,Kc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Di(ki.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ql(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Yl(t,e){var n=Vi(t),r=n.Co.get(e);if(r&&r.bo)return ua().add(r.key);var i=ua(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function $l(t,e){return b(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){switch(o.label){case 0:return[4,$c((n=Vi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Hl(n,e.targetId,i.To),i)]}}))}))}function Jl(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){return[2,Zc((e=Vi(t)).localStore).then((function(t){return Ql(e,t)}))]}))}))}function Zl(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o;return w(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Vi(t),r=Vi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Eu.resolve(null)}))}))}((i=Vi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,tl(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Bl(i,e,r||null),ql(i,e),function(t,e){Vi(Vi(t)._n).Gt(e)}(i.localStore,e)):Mi(),s.label=4;case 4:return[4,Ql(i,o)];case 5:return s.sent(),[3,7];case 6:Ri("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function tf(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return w(this,(function(h){switch(h.label){case 0:return af(n=Vi(t)),uf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,ef(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,al(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],qh(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Kl(n,e),Yc(n.localStore,e,!0)})),Bh(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,ef(n,u)];case 5:return h.sent(),function(t){var e=Vi(t);e.Co.forEach((function(t,n){Bh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ys(lo.comparator)}(n),n.$o=!1,[4,al(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function ef(t,e,n){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,d,p,v;return w(this,(function(m){switch(m.label){case 0:n=Vi(t),r=[],i=[],o=0,s=e,m.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Xc(n.localStore,os(c[0]))]:[3,7]):[3,13];case 2:u=m.sent(),h=0,l=c,m.label=3;case 3:return h<l.length?(f=l[h],d=n.Po.get(f),[4,$l(n,d)]):[3,6];case 4:(p=m.sent()).snapshot&&i.push(p.snapshot),m.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Jc(n.localStore,a)];case 8:return v=m.sent(),[4,Xc(n.localStore,v)];case 9:return u=m.sent(),[4,Rl(n,nf(v),a,!1)];case 10:m.sent(),m.label=11;case 11:r.push(u),m.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function nf(t){return $o(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function rf(t){var e=Vi(t);return Vi(Vi(e.localStore).persistence).fn()}function of(t,e,n,r){return b(this,void 0,void 0,(function(){var i,o,s;return w(this,(function(a){switch(a.label){case 0:return(i=Vi(t)).$o?(Ri("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zc(i.localStore)];case 3:return o=a.sent(),s=la.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ql(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Yc(i.localStore,e,!0)];case 6:return a.sent(),Kl(i,e,r),[3,8];case 7:Mi(),a.label=8;case 8:return[2]}}))}))}function sf(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return w(this,(function(d){switch(d.label){case 0:if(!(r=af(t)).$o)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Ri("SyncEngine","Adding an already active target "+s),[3,5]):[4,Jc(r.localStore,s)]):[3,6];case 2:return a=d.sent(),[4,Xc(r.localStore,a)];case 3:return u=d.sent(),[4,Rl(r,nf(a),u.targetId,!1)];case 4:d.sent(),qh(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return w(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Yc(r.localStore,t,!1).then((function(){Bh(r.remoteStore,t),Kl(r,t)})).catch(mc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,d.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function af(t){var e=Vi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fl.bind(null,e),e.vo._r=bl.bind(null,e.eventManager),e.vo.Mo=wl.bind(null,e.eventManager),e}function uf(t){var e=Vi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ul.bind(null,e),e}var cf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return this.R=Oh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Bc(this.persistence,new jc,t.initialUser,this.R)},t.prototype.qo=function(t){return new hh(fh.bs,this.R)},t.prototype.Bo=function(t){return new Eh},t.prototype.terminate=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return g(e,t),e.prototype.initialize=function(e){return b(this,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,th(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,uf(this.Qo.syncEngine)];case 4:return n.sent(),[4,tl(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Bc(this.persistence,new jc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new bc(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Mc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?rc.withCacheSize(this.cacheSizeBytes):rc.DEFAULT;return new xc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Dh(),Ch(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Eh},e}(cf),lf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return g(e,t),e.prototype.initialize=function(e){return b(this,void 0,void 0,(function(){var n,r=this;return w(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Th?(this.sharedClientState.syncEngine={ui:Zl.bind(null,n),ai:of.bind(null,n),hi:sf.bind(null,n),fn:rf.bind(null,n),ci:Jl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return b(r,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return[4,tf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Dh();if(!Th.yt(e))throw new Di(ki.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Th(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(hf),ff=function(){function t(){}return t.prototype.initialize=function(t,e){return b(this,void 0,void 0,(function(){var n=this;return w(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ml(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xl.bind(null,this.syncEngine),[4,al(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new ml},t.prototype.createDatastore=function(t){var e,n=Oh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new kh(e));return function(t,e,n){return new Mh(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ml(s.syncEngine,t,0)},o=Sh.yt()?new Sh:new _h,new Vh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Cl(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=Vi(t),Ri("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,jh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),df=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),pf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Tu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return b(this,void 0,void 0,(function(){var t,e,n,r;return w(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new El(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return b(this,void 0,void 0,(function(){var t,e;return w(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return b(this,void 0,void 0,(function(){var t,e;return w(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return b(this,void 0,void 0,(function(){var e,n=this;return w(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Di(ki.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return b(this,void 0,void 0,(function(){var n,r,i,o,s,a;return w(this,(function(u){switch(u.label){case 0:return n=Vi(t),r=xa(n.R)+"/documents",i={documents:e.map((function(t){return Da(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Fi(!!e.found),e.found.name,e.found.updateTime;var n=Ca(t,e.found.name),r=Aa(e.found.updateTime),i=new No({mapValue:{fields:e.found.fields}});return Do.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Fi(!!e.missing),Fi(!!e.readTime);var n=Ca(t,e.missing),r=Aa(e.readTime);return Do.newNoDocument(n,r)}(t,e):Mi()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Fi(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Hs(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return b(this,void 0,void 0,(function(){var t,e=this;return w(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=lo.fromPath(n);e.mutations.push(new zs(r,e.precondition(r)))})),[4,function(t,e){return b(this,void 0,void 0,(function(){var n,r,i;return w(this,(function(o){switch(o.label){case 0:return n=Vi(t),r=xa(n.R)+"/documents",i={writes:e.map((function(t){return Fa(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mi();e=Hi.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Di(ki.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Cs.updateTime(e):Cs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Hi.min()))throw new Di(ki.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cs.updateTime(e)}return Cs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),vf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Rh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return b(t,void 0,void 0,(function(){var t,e,n=this;return w(this,(function(r){return t=new pf(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!uo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Qs(e)}return!1},t}(),mf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dh.UNAUTHENTICATED,this.clientId=ji.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return b(r,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return Ri("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return b(this,void 0,void 0,(function(){return w(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Di(ki.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Tu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return b(t,void 0,void 0,(function(){var t,n;return w(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ll(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function gf(t,e){return b(this,void 0,void 0,(function(){var n,r,i=this;return w(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Ri("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return b(i,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Kc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function yf(t,e){return b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,bf(t)];case 1:return n=i.sent(),Ri("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return b(this,void 0,void 0,(function(){var n,r;return w(this,(function(i){switch(i.label){case 0:return(n=Vi(t)).asyncQueue.verifyOperationInProgress(),Ri("RemoteStore","RemoteStore received new credentials"),r=Wh(n),n.Or.add(3),[4,jh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Uh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function bf(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Ri("FirestoreClient","Using default OfflineComponentProvider"),[4,gf(t,new cf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function wf(t){return b(this,void 0,void 0,(function(){return w(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Ri("FirestoreClient","Using default OnlineComponentProvider"),[4,yf(t,new ff)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function If(t){return bf(t).then((function(t){return t.persistence}))}function Tf(t){return bf(t).then((function(t){return t.localStore}))}function Ef(t){return wf(t).then((function(t){return t.remoteStore}))}function _f(t){return wf(t).then((function(t){return t.syncEngine}))}function Sf(t){return b(this,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:return[4,wf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Ol.bind(null,e.syncEngine),n.onUnlisten=xl.bind(null,e.syncEngine),n)]}}))}))}function Af(t,e,n){var r=this;void 0===n&&(n={});var i=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(r,void 0,void 0,(function(){var r;return w(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new df({next:function(o){e.enqueueAndForget((function(){return yl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Di(ki.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Di(ki.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Tl(Jo(n.path),o,{includeMetadataChanges:!0,so:!0});return gl(t,s)},[4,Sf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Nf(t,e,n){var r=this;void 0===n&&(n={});var i=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(r,void 0,void 0,(function(){var r;return w(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new df({next:function(n){e.enqueueAndForget((function(){return yl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Di(ki.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Tl(n,o,{includeMetadataChanges:!0,so:!0});return gl(t,s)},[4,Sf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var kf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Df=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Cf=new Map,Of=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Rf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(dh.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),xf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Lf=function(){function t(t){var e=this;this.currentUser=dh.UNAUTHENTICATED,this.oc=new Tu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Ri("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Ri("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Ri("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Fi("string"==typeof n.accessToken),new Of(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return b(n,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Fi(null===t||"string"==typeof t),new dh(t)},t}(),Pf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=dh.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Mf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Pf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(dh.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Ff(t,e,n){if(!n)throw new Di(ki.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Vf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Di(ki.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Uf(t,e,n,r){if(!0===e&&!0===r)throw new Di(ki.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function jf(t){if(!lo.isDocumentKey(t))throw new Di(ki.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function qf(t){if(lo.isDocumentKey(t))throw new Di(ki.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Bf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mi()}function Kf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Di(ki.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Bf(t);throw new Di(ki.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Gf(t,e){if(e<=0)throw new Di(ki.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Hf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Di(ki.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Di(ki.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Uf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),zf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hf({}),this._settingsFrozen=!1,t instanceof Df?(this._databaseId=t,this._credentials=new Rf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Di(ki.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(t.options.projectId)}(t),this._credentials=new Lf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Di(ki.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Di(ki.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Rf;switch(t.type){case"gapi":var e=t.client;return Fi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Di(ki.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Cf.get(this))&&(Ri("ComponentProvider","Removing Datastore"),Cf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Wf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Qf=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Xf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Jo(r))||this)._path=r,i.type="collection",i}return g(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Wf(this.firestore,null,new lo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Qf);function Yf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=F(t),Ff("collection","path",e),t instanceof zf)return qf(n=Yi.fromString.apply(Yi,E([e],r))),new Xf(t,null,n);if(!(t instanceof Wf||t instanceof Xf))throw new Di(ki.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qf(n=Yi.fromString.apply(Yi,E([t.path],r)).child(Yi.fromString(e))),new Xf(t.firestore,null,n)}function $f(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=F(t),1===arguments.length&&(e=ji.u()),Ff("doc","path",e),t instanceof zf)return jf(n=Yi.fromString.apply(Yi,E([e],r))),new Wf(t,null,new lo(n));if(!(t instanceof Wf||t instanceof Xf))throw new Di(ki.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return jf(n=t._path.child(Yi.fromString.apply(Yi,E([e],r)))),new Wf(t.firestore,t instanceof Xf?t.converter:null,new lo(n))}function Jf(t,e){return t=F(t),e=F(e),(t instanceof Wf||t instanceof Xf)&&(e instanceof Wf||e instanceof Xf)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Zf(t,e){return t=F(t),e=F(e),t instanceof Qf&&e instanceof Qf&&t.firestore===e.firestore&&as(t._query,e._query)&&t.converter===e.converter}var td=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Rh(this,"async_queue_retry"),this.Tc=function(){var e=Ch();e&&Ri("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ch();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return b(this,void 0,void 0,(function(){var t,e=this;return w(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ku(t=n.sent()))throw t;return Ri("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,xi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=hl.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Mi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return b(this,void 0,void 0,(function(){var t;return w(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function ed(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Tu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var nd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new td,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return g(e,t),e.prototype._terminate=function(){return this._firestoreClient||id(this),this._firestoreClient.terminate()},e}(zf);function rd(t){return t._firestoreClient||id(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function id(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new kf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mf(t._credentials,t._queue,r)}function od(t,e,n){var r=this,i=new Tu;return t.asyncQueue.enqueue((function(){return b(r,void 0,void 0,(function(){var r;return w(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,gf(t,n)];case 1:return o.sent(),[4,yf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ki.FAILED_PRECONDITION||t.code===ki.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function sd(t){if(t._initialized||t._terminated)throw new Di(ki.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ad=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Di(ki.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ud=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(to.fromBase64String(e))}catch(e){throw new Di(ki.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(to.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),cd=function(t){this._methodName=t},hd=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Di(ki.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Di(ki.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return qi(this._lat,t._lat)||qi(this._long,t._long)},t}(),ld=/^__.*__$/,fd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Us(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vs(t,this.data,e,this.fieldTransforms)},t}(),dd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Us(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function pd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mi()}}var vd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Pd(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(pd(this.Cc)&&ld.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),md=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Oh(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new vd({Cc:t,methodName:e,Bc:n,path:Ji.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function gd(t){var e=t._freezeSettings(),n=Oh(t._databaseId);return new md(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Od("Data must be an object, but it was:",s,r);var a,u,c=Dd(r,s);if(o.merge)a=new Zi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=Rd(e,f[l],n);if(!s.contains(d))throw new Di(ki.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Md(h,d)||h.push(d)}a=new Zi(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new fd(new No(c),a,u)}var bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cd);function wd(t,e,n){return new vd({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype._toFieldTransform=function(t){return new ks(t.path,new ws)},e.prototype.isEqual=function(t){return t instanceof e},e}(cd),Td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=wd(this,t,!0),n=this.Uc.map((function(t){return kd(t,e)})),r=new Is(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cd),Ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=wd(this,t,!0),n=this.Uc.map((function(t){return kd(t,e)})),r=new Es(n);return new ks(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cd),_d=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return g(e,t),e.prototype._toFieldTransform=function(t){var e=new Ss(t.R,vs(t.R,this.Kc));return new ks(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cd);function Sd(t,e,n,r){var i=t.qc(1,e,n);Od("Data must be an object, but it was:",i,r);var o=[],s=No.empty();Wi(r,(function(t,r){var a=Ld(e,t,n);r=F(r);var u=i.$c(a);if(r instanceof bd)o.push(a);else{var c=kd(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Zi(o);return new dd(s,a,i.fieldTransforms)}function Ad(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Rd(e,r,n)],u=[i];if(o.length%2!=0)throw new Di(ki.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Rd(e,o[c])),u.push(o[c+1]);for(var h=[],l=No.empty(),f=a.length-1;f>=0;--f)if(!Md(h,a[f])){var d=a[f],p=u[f];p=F(p);var v=s.$c(d);if(p instanceof bd)h.push(d);else{var m=kd(p,v);null!=m&&(h.push(d),l.set(d,m))}}var g=new Zi(h);return new dd(l,g,s.fieldTransforms)}function Nd(t,e,n,r){return void 0===r&&(r=!1),kd(n,t.qc(r?4:3,e))}function kd(t,e){if(Cd(t=F(t)))return Od("Unsupported field value:",e,t),Dd(t,e);if(t instanceof cd)return function(t,e){if(!pd(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=kd(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=F(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Gi.fromDate(t);return{timestampValue:Ea(e.R,n)}}if(t instanceof Gi)return n=new Gi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ea(e.R,n)};if(t instanceof hd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ud)return{bytesValue:_a(e.R,t._byteString)};if(t instanceof Wf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Na(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Bf(t))}(t,e)}function Dd(t,e){var n={};return Qi(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(function(t,r){var i=kd(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Cd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Gi||t instanceof hd||t instanceof ud||t instanceof Wf||t instanceof cd)}function Od(t,e,n){if(!Cd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Bf(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function Rd(t,e,n){if((e=F(e))instanceof ad)return e._internalPath;if("string"==typeof e)return Ld(t,e);throw Pd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xd=new RegExp("[~\\*/\\[\\]]");function Ld(t,e,n){if(e.search(xd)>=0)throw Pd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ad.bind.apply(ad,E([void 0],e.split(".")))))._internalPath}catch(r){throw Pd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Pd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Di(ki.INVALID_ARGUMENT,(a+=". ")+t+u)}function Md(t,e){return t.some((function(t){return t.isEqual(e)}))}var Fd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Wf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Vd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Ud("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Fd);function Ud(t,e){return"string"==typeof e?Ld(t,e):e instanceof ad?e._internalPath:e._delegate._internalPath}var jd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),qd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return g(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Ud("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Fd),Bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(qd),Kd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new jd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Bd(n._firestore,n._userDataWriter,r.key,r,new jd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Di(ki.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Bd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Bd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new jd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Gd(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Gd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mi()}}function Hd(t,e){return t instanceof qd&&e instanceof qd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Kd&&e instanceof Kd&&t._firestore===e._firestore&&Zf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function zd(t){if(ts(t)&&0===t.explicitOrderBy.length)throw new Di(ki.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=function(){};function Qd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Xd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return g(e,t),e.prototype._apply=function(t){var e=gd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Di(ki.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){np(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(ep(r,t,l))}a={arrayValue:{values:u}}}else a=ep(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||np(s,o),a=Nd(n,"where",s,"in"===o||"not-in"===o);var f=Po.create(i,o,a);return function(t,e){if(e.g()){var n=ns(t);if(null!==n&&!n.isEqual(e.field))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=es(t);null!==r&&rp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Di(ki.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Di(ki.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Qf(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Wd),Yd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return g(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Di(ki.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Di(ki.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new zo(e,n);return function(t,e){if(null===es(t)){var n=ns(t);null!==n&&rp(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Qf(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Yo(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Wd),$d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return g(e,t),e.prototype._apply=function(t){return new Qf(t.firestore,t.converter,ss(t._query,this.zc,this.Hc))},e}(Wd),Jd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return g(e,t),e.prototype._apply=function(t){var e=tp(t,this.type,this.Jc,this.Yc);return new Qf(t.firestore,t.converter,function(t,e){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Wd),Zd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return g(e,t),e.prototype._apply=function(t){var e=tp(t,this.type,this.Jc,this.Yc);return new Qf(t.firestore,t.converter,function(t,e){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Wd);function tp(t,e,n,r){if(n[0]=F(n[0]),n[0]instanceof Fd)return function(t,e,n,r,i){if(!r)throw new Di(ki.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=is(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(wo(e,r.key));else{var c=r.data.field(u.field);if(oo(c))throw new Di(ki.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Di(ki.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Go(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=gd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Di(ki.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Di(ki.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!rs(t)&&-1!==c.indexOf("/"))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Yi.fromString(c));if(!lo.isDocumentKey(h))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new lo(h);a.push(wo(e,l))}else{var f=Nd(n,r,c);a.push(f)}}return new Go(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ep(t,e,n){if("string"==typeof(n=F(n))){if(""===n)throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!rs(e)&&-1!==n.indexOf("/"))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yi.fromString(n));if(!lo.isDocumentKey(r))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return wo(t,new lo(r))}if(n instanceof Wf)return wo(t,n._key);throw new Di(ki.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bf(n)+".")}function np(t,e){if(!Array.isArray(t)||0===t.length)throw new Di(ki.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Di(ki.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function rp(t,e,n){if(!n.isEqual(e))throw new Di(ki.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ip=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),fo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ro(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(io(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Wi(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new hd(ro(t.latitude),ro(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=so(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ao(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=no(t);return new Gi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yi.fromString(t);Fi(Ja(n));var r=new Df(n.get(1),n.get(3)),i=new lo(n.popFirst(5));return r.isEqual(e)||xi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function op(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var sp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new ud(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wf(this.firestore,null,e)},e}(ip),ap=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=gd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=up(t,this._firestore),i=op(r.converter,e,n),o=yd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Cs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=up(t,this._firestore);return o="string"==typeof(e=F(e))||e instanceof ad?Ad(this._dataReader,"WriteBatch.update",s._key,e,n,r):Sd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Cs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=up(t,this._firestore);return this._mutations=this._mutations.concat(new Hs(e._key,Cs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Di(ki.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function up(t,e){if((t=F(t)).firestore!==e)throw new Di(ki.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new ud(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Wf(this.firestore,null,e)},e}(ip);function hp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Kf(t,Wf);var o=Kf(t.firestore,nd),s=gd(o);return fp(o,[("string"==typeof(e=F(e))||e instanceof ad?Ad(s,"updateDoc",t._key,e,n,r):Sd(s,"updateDoc",t._key,e)).toMutation(t._key,Cs.exists(!0))])}function lp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=F(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ed(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(ed(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Wf)c=Kf(t.firestore,nd),h=Jo(t._key.path),u={next:function(e){i[a]&&i[a](dp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Kf(t,Qf);c=Kf(d.firestore,nd),h=d._query;var p=new cp(c);u={next:function(t){i[a]&&i[a](new Kd(c,p,d,t))},error:i[a+1],complete:i[a+2]},zd(t._query)}return function(t,e,n,r){var i=this,o=new df(r),s=new Tl(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return b(i,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=gl,[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return b(i,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=yl,[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(rd(c),h,l,u)}function fp(t,e){return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var n;return w(this,(function(i){switch(i.label){case 0:return n=Ll,[4,_f(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(rd(t),e)}function dp(t,e,n){var r=n.docs.get(e._key),i=new cp(t);return new qd(t,i,e._key,r,new jd(n.hasPendingWrites,n.fromCache),e.converter)}var pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return g(e,t),e.prototype.get=function(e){var n=this,r=up(e,this._firestore),i=new cp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new qd(n._firestore,i,r._key,t._document,new jd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=gd(t)}return t.prototype.get=function(t){var e=this,n=up(t,this._firestore),r=new sp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Mi();var i=t[0];if(i.isFoundDocument())return new Fd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fd(e._firestore,r,n._key,null,n.converter);throw Mi()}))},t.prototype.set=function(t,e,n){var r=up(t,this._firestore),i=op(r.converter,e,n),o=yd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=up(t,this._firestore);return o="string"==typeof(e=F(e))||e instanceof ad?Ad(this._dataReader,"Transaction.update",s._key,e,n,r):Sd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=up(t,this._firestore);return this._transaction.delete(e._key),this},t}());function vp(){if("undefined"==typeof Uint8Array)throw new Di(ki.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function mp(){if("undefined"==typeof atob)throw new Di(ki.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var gp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return mp(),new t(ud.fromBase64String(e))},t.fromUint8Array=function(e){return vp(),new t(ud.fromUint8Array(e))},t.prototype.toBase64=function(){return mp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return vp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),yp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){sd(t=Kf(t,nd));var n=rd(t),r=t._freezeSettings(),i=new ff;return od(n,i,new hf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){sd(t=Kf(t,nd));var e=rd(t),n=t._freezeSettings(),r=new ff;return od(e,r,new lf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Di(ki.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Tu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return b(e,void 0,void 0,(function(){var e;return w(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return Su.yt()?(e=t+"main",[4,Su.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Mc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),bp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Df||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Kf(t,zf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Li("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n="demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=y({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),_.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Di(ki.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new xf(new Of(o,new dh(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return b(e,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:return[4,If(t)];case 1:return e=r.sent(),[4,Ef(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Vi(t);return e.Or.delete(0),Uh(e)}(n))]}}))}))}))}(rd(Kf(this._delegate,nd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return b(e,void 0,void 0,(function(){var e,n;return w(this,(function(r){switch(r.label){case 0:return[4,If(t)];case 1:return e=r.sent(),[4,Ef(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return b(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return(e=Vi(t)).Or.add(0),[4,jh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(rd(Kf(this._delegate,nd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Uf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(e,void 0,void 0,(function(){var e;return w(this,(function(r){switch(r.label){case 0:return e=jl,[4,_f(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(rd(Kf(this._delegate,nd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new df(e);return t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=function(t,e){Vi(t).Gr.add(e),e.next()},[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=function(t,e){Vi(t).Gr.delete(e)},[4,Sf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(rd(t=Kf(t,nd)),ed(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Di(ki.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xp(this,Yf(this._delegate,t))}catch(t){throw Sp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new _p(this,$f(this._delegate,t))}catch(t){throw Sp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Cp(this,function(t,e){if(t=Kf(t,zf),Ff("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Di(ki.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Qf(t,null,function(t){return new Yo(Yi.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Sp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var n;return w(this,(function(i){switch(i.label){case 0:return[4,function(t){return wf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new vf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(rd(t),(function(n){return e(new pp(t,n))}))}(this._delegate,(function(n){return t(new Ip(e,n))}))},t.prototype.batch=function(){var t=this;return rd(this._delegate),new Tp(new ap(this._delegate,(function(e){return fp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Di(ki.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Di(ki.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),wp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return g(e,t),e.prototype.convertBytes=function(t){return new gp(new ud(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return _p.tu(e,this.firestore,null)},e}(ip),Ip=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new wp(t)}return t.prototype.get=function(t){var e=this,n=Lp(t);return this._delegate.get(n).then((function(t){return new kp(e._firestore,new qd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Lp(t);return n?(Vf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Lp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,E([s,e,n],i)),this},t.prototype.delete=function(t){var e=Lp(t);return this._delegate.delete(e),this},t}(),Tp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Lp(t);return n?(Vf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Lp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,E([s,e,n],i)),this},t.prototype.delete=function(t){var e=Lp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Ep=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Bd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Dp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new wp(e),n),i.set(n,o)),o},t}();Ep.nu=new WeakMap;var _p=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wp(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Di(ki.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Wf(n._delegate,r,new lo(e)))},t.tu=function(e,n,r){return new t(n,new Wf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xp(this.firestore,Yf(this._delegate,t))}catch(t){throw Sp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=F(t))instanceof Wf&&Jf(this._delegate,t)},t.prototype.set=function(t,e){e=Vf("DocumentReference.set",e);try{return function(t,e,n){t=Kf(t,Wf);var r=Kf(t.firestore,nd),i=op(t.converter,e,n);return fp(r,[yd(gd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Cs.none())])}(this._delegate,t,e)}catch(t){throw Sp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?hp(this._delegate,t):hp.apply(void 0,E([this._delegate,t,e],n))}catch(t){throw Sp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return fp(Kf((t=this._delegate).firestore,nd),[new Hs(t._key,Cs.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ap(e),i=Np(e,(function(e){return new kp(t.firestore,new qd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return lp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Kf(t,Wf);var e=Kf(t.firestore,nd),n=rd(e),r=new cp(e);return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var n;return w(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return b(this,void 0,void 0,(function(){var r,i;return w(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Vi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Di(ki.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ll(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Tf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new qd(e,r,t._key,n,new jd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Kf(t,Wf);var e=Kf(t.firestore,nd);return Af(rd(e),t._key,{source:"server"}).then((function(n){return dp(e,t,n)}))}(this._delegate):function(t){t=Kf(t,Wf);var e=Kf(t.firestore,nd);return Af(rd(e),t._key).then((function(n){return dp(e,t,n)}))}(this._delegate)).then((function(t){return new kp(e.firestore,new qd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ep.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Sp(t,e,n){return t.message=t.message.replace(e,n),t}function Ap(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ed(r))return r}return{}}function Np(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ed(t[0])?t[0]:ed(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new _p(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),Dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(kp),Cp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new wp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Qd(this._delegate,function(t,e,n){var r=e,i=Ud("where",t);return new Xd(i,r,n)}(e,n,r)))}catch(e){throw Sp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Qd(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Ud("orderBy",t);return new Yd(r,n)}(e,n)))}catch(e){throw Sp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Qd(this._delegate,function(t){return Gf("limit",t),new $d("limit",t,"F")}(e)))}catch(e){throw Sp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Qd(this._delegate,function(t){return Gf("limitToLast",t),new $d("limitToLast",t,"L")}(e)))}catch(e){throw Sp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Qd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Sp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Qd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Sp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Qd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Sp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Qd(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Sp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Zf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Kf(t,Qf);var e=Kf(t.firestore,nd),n=rd(e),r=new cp(e);return function(t,e){var n=this,r=new Tu;return t.asyncQueue.enqueueAndForget((function(){return b(n,void 0,void 0,(function(){var n;return w(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return b(this,void 0,void 0,(function(){var r,i,o,s,a;return w(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,$c(t,e,!0)];case 1:return a=u.sent(),r=new Nl(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=ll(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,Tf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Kd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Kf(t,Qf);var e=Kf(t.firestore,nd),n=rd(e),r=new cp(e);return Nf(n,t._query,{source:"server"}).then((function(n){return new Kd(e,r,t,n)}))}(this._delegate):function(t){t=Kf(t,Qf);var e=Kf(t.firestore,nd),n=rd(e),r=new cp(e);return zd(t._query),Nf(n,t._query).then((function(n){return new Kd(e,r,t,n)}))}(this._delegate)).then((function(t){return new Rp(e.firestore,new Kd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ap(e),i=Np(e,(function(e){return new Rp(t.firestore,new Kd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return lp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Ep.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Op=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Dp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Rp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Cp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Dp(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Op(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Dp(n._firestore,r))}))},t.prototype.isEqual=function(t){return Hd(this._delegate,t._delegate)},t}(),xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return g(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new _p(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new _p(this.firestore,void 0===t?$f(this._delegate):$f(this._delegate,t))}catch(t){throw Sp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Kf(t.firestore,nd),r=$f(t),i=op(t.converter,e);return fp(n,[yd(gd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Cs.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new _p(e.firestore,t)}))},e.prototype.isEqual=function(t){return Jf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Ep.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(Cp);function Lp(t){return Kf(t,Wf)}var Pp,Mp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ad.bind.apply(ad,E([void 0],t)))}return t.documentId=function(){return new t(Ji.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=F(t))instanceof ad&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Fp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Id("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new bd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Td("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ed("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new _d("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Vp={Firestore:bp,GeoPoint:hd,Timestamp:Gi,Blob:gp,Transaction:Ip,WriteBatch:Tp,DocumentReference:_p,DocumentSnapshot:kp,Query:Cp,QueryDocumentSnapshot:Dp,QuerySnapshot:Rp,CollectionReference:xp,FieldPath:Mp,FieldValue:Fp,setLogLevel:function(t){var e;e=t,Ci.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new U("firestore",(function(t){return function(t,e){return new bp(t,new nd(t,e),new yp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Vp)))})(Pp=ft),Pp.registerVersion("@firebase/firestore","2.3.8");const Up=ft.initializeApp({apiKey:"AIzaSyBUayTW7tjvvgGPKev38XV6t43TYDCotAk",authDomain:"js-summer-camp-16dd2.firebaseapp.com",projectId:"js-summer-camp-16dd2",storageBucket:"js-summer-camp-16dd2.appspot.com",messagingSenderId:"986930472472",appId:"1:986930472472:web:f71fd9c48d1263dd26456d",measurementId:"G-XQX1GK6RRE"}),jp=ft.firestore(),qp=(Up.auth(),jp.collection("films"));jp.collection("people"),jp.collection("planets"),jp.collection("species"),jp.collection("starships"),jp.collection("transport"),jp.collection("vehicles");class Bp extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='   \n        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">\n            <div class="container-fluid">\n                <a class="navbar-brand" href="../">\n                    <span>LOGO.png :)</span>\n                </a>\n                <div class="collapse navbar-collapse" id="navbarText">\n                    <ul class="navbar-nav me-auto mb-2 mb-lg-0" id="links-list">\n                        <li class="nav-item">\n                            <a class="nav-link" id="films-table-link" href="../">Films</a>\n                        </li>\n                    </ul>\n                    <button class="btn btn-outline-success" type="button" id="auth-call-btn"></button>\n                </div>\n            </div>\n        </nav>\n       ',this.authButton=document.getElementById("auth-call-btn"),this.authButton.addEventListener("click",Kp),document.addEventListener("DOMContentLoaded",(()=>{this.setAuthButtonText(),v()&&(document.getElementById("links-list").innerHTML+='\n     <li class="nav-item" id="new-film-create-item">\n        <a class="nav-link" id="new-film-create-link" href="../management.html">Create new film</a>\n     </li>\n    ')}))}disconnectedCallback(){this.authButton.removeEventListener("click",Kp)}setAuthButtonText(){this.authButton.innerText=v()?"Logout":"Login"}}function Kp(){v()&&localStorage.removeItem("activeUser"),window.open("auth.html","_self")}customElements.get("header-component")||customElements.define("header-component",Bp);var Gp=n(577),Hp={};Hp.styleTagTransform=f(),Hp.setAttributes=u(),Hp.insert=s().bind(null,"head"),Hp.domAPI=i(),Hp.insertStyleElement=h(),e()(Gp.Z,Hp),Gp.Z&&Gp.Z.locals&&Gp.Z.locals;const zp={};window.customModal=zp,Element.prototype.appendAfter=function(t){t.parentNode.insertBefore(this,t.nextSibling)},zp.modal=function(t){const e=function(t){const e=document.createElement("div");return e.classList.add("vmodal"),e.insertAdjacentHTML("afterbegin",`\n    <div class = "modal-overlay" data-close = "true">\n      <div class = "modal-window" style="width: ${t.width||"600px"}">\n        <div class = "modal-header">\n          <span class = "modal-title">${t.title||"Окно"}</span>\n          ${t.closable?'<span class = "modal-close" data-close = "true">&times;</span>':""}\n        </div>\n        <div class = "modal-body" data-content>\n          ${t.content||""}\n        </div>\n      </div>\n    </div>\n  `),function(t=[]){if(0===t.length)return document.createElement("div");const e=document.createElement("div");return e.classList.add("modal-footer"),t.forEach((t=>{const n=document.createElement("button");n.textContent=t.text,n.classList.add("btn"),n.classList.add(`btn-${t.type||"secondary"}`),n.onclick=t.handler,e.appendChild(n)})),e}(t.footerButtons).appendAfter(e.querySelector("[data-content]")),document.body.appendChild(e),e}(t);let n=!1,r=!1;const i={open(){if(r)return console.log("Modal is destroyed");!n&&e.classList.add("open")},close(){n=!0,e.classList.remove("open"),e.classList.add("hide"),setTimeout((()=>{e.classList.remove("hide"),n=!1,"function"==typeof t.onClose&&t.onClose()}),200)}},o=t=>{t.target.dataset.close&&i.close()};return e.addEventListener("click",o),Object.assign(i,{destroy(){e.parentNode.removeChild(e),e.removeEventListener("click",o),r=!0},setContent(t){e.querySelector("[data-content]").innerHTML=t}})},zp.confirm=function(t){return new Promise(((e,n)=>{const r=zp.modal({title:t.title,width:"500px",closable:!1,content:t.content,onClose(){r.destroy()},footerButtons:[{text:"Cancel",type:"secondary",handler(){r.close(),n()}},{text:"Remove",type:"danger",handler(){r.close(),e()}}]});setTimeout((()=>r.open()),100)}))};const Wp=zp.modal({title:"Error",closable:!0,width:"400px",footerButtons:[{text:"Close",type:"primary",handler(){Wp.close()}}]}),Qp=zp.modal({title:"Attention",closable:!0,width:"300px",footerButtons:[{text:"Close",type:"primary",handler(){Qp.close()}}]}),Xp=zp.modal({title:"Welcome",closable:!0,width:"250px",footerButtons:[{text:"Close",type:"primary",handler(){Xp.close()}}]}),Yp=zp.modal({title:"Success",closable:!0,width:"200px",footerButtons:[{text:"Close",type:"primary",handler(){Yp.close()}}]}),$p={error:Wp,attention:Qp,welcome:Xp,success:Yp};function Jp(t,e){!function(t,e){t.setContent(`\n  <p>${e}</p>\n  `),t.open()}($p[t],e)}var Zp=n(890),tv={};tv.styleTagTransform=f(),tv.setAttributes=u(),tv.insert=s().bind(null,"head"),tv.domAPI=i(),tv.insertStyleElement=h(),e()(Zp.Z,tv),Zp.Z&&Zp.Z.locals&&Zp.Z.locals;class ev{constructor(t={}){this.pk=t.pk||Math.floor(9994*Math.random()+6),this.title=t.title||"",this.episode_id=t.episode_id||"",this.characters=t.characters||[],this.created=t.created||new Date,this.director=t.director||"",this.edited=t.edited||new Date,this.opening_crawl=t.opening_crawl||"",this.planets=t.planets||[],this.producer=t.producer||"",this.release_date=t.release_date||new Date,this.species=t.species||[],this.starships=t.starships||[],this.vehicles=t.vehicles||[]}}const nv={film:function(t){const e=t.fields;return e.pk=t.pk,new ev(e)},people:function(t,e){return(e=t.fields).pk=t.pk,e},planet:function(t,e){return(e=t.fields).pk=t.pk,e},species:function(t,e){return(e=t.fields).pk=t.pk,e},starship:function(t,e){return(e=t.fields).pk=t.pk,e},transport:function(t,e){return(e=t.fields).pk=t.pk,e},vehicle:function(t,e){return(e=t.fields).pk=t.pk,e}};let rv=[],iv="pk",ov="asc",sv=3,av=0;const uv="asc",cv=document.getElementById("previous-page-button"),hv=document.getElementById("next-page-button"),lv=document.getElementById("table-search-word"),fv=document.getElementById("table-films");async function dv(t="pk",e="asc",n=3,r,i="",o="",s=""){return i&&""!=i||(o=0),async function(t,e){var n;""!==t.filterValue&&void 0!==t.filterValue&&(t.sortingByField="title",t.sortingOrder="asc"),t.sortingByField=("pk"!==(n=t.sortingByField)&&(n=`fields.${n}`),n);let r=qp.orderBy(t.sortingByField,t.sortingOrder);return""!==t.filterValue&&(r=r.where("fields.title",">=",t.filterValue).where("fields.title","<=",t.filterValue+"")),"current"===t.direction&&(r=r.limit(t.limit)),"next"===t.direction&&(r=r.startAfter(t.startAfterValue).limit(t.limit)),"prev"===t.direction&&(r=r.endBefore(t.endBeforeValue).limitToLast(t.limit)),await async function(t,e,n){return await t.get().then((t=>t.docs.map((t=>function(t,e){return(0,nv[e])(t)}(t.data(),e))))).catch((t=>(n("error","There are some error on getting data from API: "+t),[])))}(r,"film",(function(t,e){!function(t,e){Jp(t,e)}(t,e)}))}({sortingByField:t,sortingOrder:e,limit:n,direction:r,endBeforeValue:i,startAfterValue:o,filterValue:s})}async function pv(t="current"){mv();let e="",n="";rv[0]&&(n=rv[0][iv]),rv[rv.length-1]&&(e=rv[rv.length-1][iv]);let r=sv;"prev"!=t&&r++,rv=await dv(iv,ov,r,t,n,e);const i=rv.length>sv||"prev"===t;rv=rv.slice(0,sv),rv.forEach((t=>{vv(t)})),i?i&&hv.classList.remove("hidden"):hv.classList.add("hidden"),0===av?cv.classList.add("hidden"):av>0&&cv.classList.remove("hidden")}function vv(t){const{title:e,episode_id:n,release_date:r,director:i,producer:o}=t,s={title:e,episode_id:n,release_date:r,director:i,producer:o},a=fv.insertRow(fv.rows.length);for(const e of Object.keys(s))a.insertCell().appendChild(document.createTextNode(t[e]));if(v()){const e=a.insertCell(5),n=document.createElement("a");n.setAttribute("href",`../details.html?pk=${t.pk}`),n.setAttribute("role","button"),n.classList.add("btn"),n.classList.add("btn-light"),n.innerText="Details",e.appendChild(n);const r=a.insertCell(6),i=document.createElement("a");i.setAttribute("href",`../management.html?pk=${t.pk}`),i.setAttribute("role","button"),i.classList.add("btn"),i.classList.add("btn-success"),i.innerText="Edit",r.appendChild(i);const o=a.insertCell(7),s=document.createElement("a");s.setAttribute("id",`button-delete-${t.pk}`),s.setAttribute("value",`${t.title}`),s.classList.add("btn"),s.classList.add("btn-danger"),s.classList.add("delete-button"),s.innerText="Delete",s.addEventListener("click",(()=>{customModal.confirm({title:"Delete",content:`Do you really wont to delete ${t.title} film?`}).then((async()=>{await async function(t){let e=qp;const n=await qp.where("pk","==",t).get().then((t=>t.docs.map((t=>t.id))));await e.doc(n[0]).delete().then((()=>{Jp("success","Film was deleted successfully")})).catch((t=>{Jp("error",t)}))}(t.pk),pv()}))})),o.appendChild(s)}a.setAttribute("class","film-row"),a.setAttribute("id",`film-${t.pk}`)}function mv(){document.querySelectorAll(".film-row").forEach((function(t){t.remove()}))}cv.addEventListener("click",(async function(){av--,pv("prev")})),hv.addEventListener("click",(async function(){av++,pv("next")})),lv.addEventListener("keyup",(async()=>{let t=lv.value;av=0;let e=await dv(iv,ov,sv,"current","","",t);mv(),e.forEach((t=>{vv(t)}))})),document.addEventListener("DOMContentLoaded",(async()=>{v()&&(function(){let t=document.createElement("th");t.classList.add("films-table-header"),t.appendChild(document.createTextNode("Info")),fv.rows[0].appendChild(t)}(),function(){let t=document.createElement("th");t.classList.add("films-table-header"),t.appendChild(document.createTextNode("Edit")),fv.rows[0].appendChild(t)}(),function(){let t=document.createElement("th");t.classList.add("films-table-header"),t.appendChild(document.createTextNode("Delete")),fv.rows[0].appendChild(t)}()),pv()})),document.getElementById("select-count").addEventListener("change",(function(t){t.preventDefault(),av=0,sv=Number(t.target.value),pv()}),!0),document.querySelectorAll(".films-table-header").forEach(((t,e)=>{t.addEventListener("click",(()=>{!function(t){t===iv?"desc"===ov?(ov=uv,iv="pk"):ov===uv&&(ov="desc"):t!==iv&&(iv=t,ov=uv),av=0,pv()}(function(t){let e="pk";switch(t){case-1:e="pk";break;case 0:e="title";break;case 1:e="episode_id";break;case 2:e="release_date";break;case 3:e="director";break;case 4:e="producer";break;default:e="pk"}return e}(e))}))}))})()})();